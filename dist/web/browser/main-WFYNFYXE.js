import{a as ys,b as ms}from"./chunk-6WPNMGAC.js";import{$ as Kr,Aa as Ot,Ba as Rt,Ca as kt,P as Oe,Q as g,S as Q,Sc as ue,Tc as me,Ub as os,Uc as ls,V as Yr,Vc as ps,W as oe,Wc as fs,X as ye,Xb as cs,Xc as ee,Y as dt,Yb as us,Yc as gs,Z as Ve,Zc as G,_ as Vr,_b as ds,_c as z,aa as Br,ba as qr,ca as Qr,da as zr,dc as hs,ea as Hr,fa as ht,ga as Gr,ha as le,ia as Wr,ja as X,k as Fr,ka as ce,l as Pr,la as lt,m as jr,ma as Zr,n as Ye,na as h,oa as pt,pa as ft,qa as gt,ra as yt,sa as mt,ta as Et,ua as St,va as Jr,wa as vt,xa as At,ya as Tt,za as Ct}from"./chunk-IAI7ZALY.js";import{T as Xr,aa as Ke,ba as es,c as Nr,d as wr,e as Ur,ea as ts,g as $r,h as Lr,ha as rs,ja as ss,na as is,ra as as,sa as ns}from"./chunk-PS3DXR7F.js";import"./chunk-JKO3ADSL.js";import{$a as Or,$d as ut,A as it,B as S,Ca as b,Cb as Le,Cc as ne,D as N,Da as m,Ea as L,Eb as J,F as pr,G as xe,Ga as $e,Ha as Ce,I as at,Jb as Fe,Kc as Pe,L as H,M as fe,N as _,Pa as Ar,R as k,Sa as Tr,T as _e,U as Ne,Ua as he,Va as Z,W as Y,Wa as Cr,X as fr,Xb as Rr,Z as nt,_ as gr,a as y,b as A,ba as B,bc as kr,cc as Dr,db as ct,de as _r,ea as ot,gc as ie,ha as yr,hc as ae,hd as br,ic as ge,ja as mr,jd as Mr,k as Ae,la as Er,ld as Ir,ma as Sr,md as je,n as Ie,na as V,oa as vr,p as ur,qa as se,r as dr,ra as we,sa as Ue,t as hr,u as lr,ua as W,w as O,wd as xr,x as de,xa as R,ya as Te}from"./chunk-G7L63APJ.js";var Mi={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Be="__@ngrx/effects_create__";function I(s,e={}){let r=e.functional?s:s(),t=y(y({},Mi),e);return Object.defineProperty(r,Be,{value:t}),r}function Ii(s){return Object.getOwnPropertyNames(s).filter(t=>s[t]&&s[t].hasOwnProperty(Be)?s[t][Be].hasOwnProperty("dispatch"):!1).map(t=>{let a=s[t][Be];return y({propertyName:t},a)})}function xi(s){return Ii(s)}function Ss(s){return Object.getPrototypeOf(s)}function _i(s){return!!s.constructor&&s.constructor.name!=="Object"&&s.constructor.name!=="Function"}function vs(s){return typeof s=="function"}function Ni(s){return s.filter(vs)}function wi(s,e,r){let t=Ss(s),o=!!t&&t.constructor.name!=="Object"?t.constructor.name:null,d=xi(s).map(({propertyName:i,dispatch:c,useEffectsErrorHandler:n})=>{let l=typeof s[i]=="function"?s[i]():s[i],u=n?r(l,e):l;return c===!1?u.pipe(fr()):u.pipe(yr()).pipe(S(E=>({effect:s[i],notification:E,propertyName:i,sourceName:o,sourceInstance:s})))});return H(...d)}var Ui=10;function As(s,e,r=Ui){return s.pipe(k(t=>(e&&e.handleError(t),r<=1?s:As(s,e,r-1))))}var Ee=(()=>{let e=class e extends Ae{constructor(t){super(),t&&(this.source=t)}lift(t){let a=new e;return a.source=this,a.operator=t,a}};e.\u0275fac=function(a){return new(a||e)(m(le))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();function x(...s){return _(e=>s.some(r=>typeof r=="string"?r===e.type:r.type===e.type))}var Qa=new b("@ngrx/effects Internal Root Guard"),za=new b("@ngrx/effects User Provided Effects"),Ha=new b("@ngrx/effects Internal Root Effects"),Ga=new b("@ngrx/effects Internal Root Effects Instances"),Wa=new b("@ngrx/effects Internal Feature Effects"),Za=new b("@ngrx/effects Internal Feature Effects Instance Groups"),$i=new b("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>As}),Li="@ngrx/effects/init",Fi=oe(Li);function Pi(s,e){if(s.notification.kind==="N"){let r=s.notification.value;!ji(r)&&e.handleError(new Error(`Effect ${Yi(s)} dispatched an invalid action: ${Vi(r)}`))}}function ji(s){return typeof s!="function"&&s&&s.type&&typeof s.type=="string"}function Yi({propertyName:s,sourceInstance:e,sourceName:r}){let t=typeof e[s]=="function";return!!r?`"${r}.${String(s)}${t?"()":""}"`:`"${String(s)}()"`}function Vi(s){try{return JSON.stringify(s)}catch{return s}}var Ki="ngrxOnIdentifyEffects";function Bi(s){return Dt(s,Ki)}var qi="ngrxOnRunEffects";function Qi(s){return Dt(s,qi)}var zi="ngrxOnInitEffects";function Hi(s){return Dt(s,zi)}function Dt(s,e){return s&&e in s&&typeof s[e]=="function"}var Ts=(()=>{let e=class e extends Ie{constructor(t,a){super(),this.errorHandler=t,this.effectsErrorHandler=a}addEffects(t){this.next(t)}toActions(){return this.pipe(ot(t=>_i(t)?Ss(t):t),N(t=>t.pipe(ot(Gi))),N(t=>{let a=t.pipe(B(d=>Wi(this.errorHandler,this.effectsErrorHandler)(d)),S(d=>(Pi(d,this.errorHandler),d.notification)),_(d=>d.kind==="N"&&d.value!=null),gr()),o=t.pipe(Y(1),_(Hi),S(d=>d.ngrxOnInitEffects()));return H(a,o)}))}};e.\u0275fac=function(a){return new(a||e)(m(Le),m($i))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();function Gi(s){return Bi(s)?s.ngrxOnIdentifyEffects():""}function Wi(s,e){return r=>{let t=wi(r,s,e);return Qi(r)?r.ngrxOnRunEffects(t):t}}var Zi=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(t,a){this.effectSources=t,this.store=a,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(a){return new(a||e)(m(Ts),m(X))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();function Cs(...s){let e=s.flat(),r=Ni(e);return Z([r,{provide:he,multi:!0,useValue:()=>{L(Kr),L(Br,{optional:!0});let t=L(Zi),a=L(Ts),o=!t.isStarted;o&&t.start();for(let d of e){let i=vs(d)?L(d):d;a.addEffects(i)}o&&L(X).dispatch(Fi())}}])}var ks=(()=>{let e=class e{create(t,a,o,d){let i=typeof t=="string"?A(y({},d||{}),{entityName:t,entityOp:a,data:o}):t;return this.createCore(i)}createCore(t){let{entityName:a,entityOp:o,tag:d}=t;if(!a)throw new Error("Missing entity name for new action");if(o==null)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(o,d||a),payload:t}}createFromAction(t,a){return this.create(y(y({},t.payload),a))}formatActionType(t,a){return`[${a}] ${t}`}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),qe=class{constructor(e,r){this.entityName=e,this.selectId=r}mustBeEntity(e){let r=this.extractData(e);if(!r)return this.throwError(e,"should have a single entity.");let t=this.selectId(r);return this.isNotKeyType(t)&&this.throwError(e,"has a missing or invalid entity key (id)"),r}mustBeEntities(e){let r=this.extractData(e);return Array.isArray(r)?(r.forEach((t,a)=>{let o=this.selectId(t);if(this.isNotKeyType(o)){let d=`, item ${a+1}, does not have a valid entity key (id)`;this.throwError(e,d)}}),r):this.throwError(e,"should be an array of entities")}mustBeKey(e){let r=this.extractData(e);if(r===void 0)throw new Error("should be a single entity key");if(this.isNotKeyType(r))throw new Error("is not a valid key (id)");return r}mustBeKeys(e){let r=this.extractData(e);return Array.isArray(r)?(r.forEach((t,a)=>{if(this.isNotKeyType(t)){let o=`${this.entityName} ', item ${a+1}, is not a valid entity key (id)`;this.throwError(e,o)}}),r):this.throwError(e,"should be an array of entity keys (id)")}mustBeUpdate(e){let r=this.extractData(e);if(!r)return this.throwError(e,"should be a single entity update");let{id:t,changes:a}=r,o=this.selectId(a);return(this.isNotKeyType(t)||this.isNotKeyType(o))&&this.throwError(e,"has a missing or invalid entity key (id)"),r}mustBeUpdates(e){let r=this.extractData(e);return Array.isArray(r)?(r.forEach((t,a)=>{let{id:o,changes:d}=t,i=this.selectId(d);(this.isNotKeyType(o)||this.isNotKeyType(i))&&this.throwError(e,`, item ${a+1}, has a missing or invalid entity key (id)`)}),r):this.throwError(e,"should be an array of entity updates")}mustBeUpdateResponse(e){let r=this.extractData(e);if(!r)return this.throwError(e,"should be a single entity update");let{id:t,changes:a}=r,o=this.selectId(a);return(this.isNotKeyType(t)||this.isNotKeyType(o))&&this.throwError(e,"has a missing or invalid entity key (id)"),r}mustBeUpdateResponses(e){let r=this.extractData(e);return Array.isArray(r)?(r.forEach((t,a)=>{let{id:o,changes:d}=t,i=this.selectId(d);(this.isNotKeyType(o)||this.isNotKeyType(i))&&this.throwError(e,`, item ${a+1}, has a missing or invalid entity key (id)`)}),r):this.throwError(e,"should be an array of entity updates")}extractData(e){return e.payload&&e.payload.data}isNotKeyType(e){return typeof e!="string"&&typeof e!="number"}throwError(e,r){throw new Error(`${this.entityName} EntityAction guard for "${e.type}": payload ${r}`)}};function Re(s){return s?.id}function Ji(s){if(s==null)return[];if(Array.isArray(s[0])){let[e,...r]=s;s=[...e,...r]}return s}function Ds(s){return s=s||Re,function(r){let t=s(r);if(t==null)throw new Error("Primary key may not be null/undefined.");return r&&{id:t,changes:r}}}function Os(...s){let e=Ji(s);switch(e.length){case 0:return _(t=>t.payload&&t.payload.entityName!=null);case 1:let r=e[0];return _(t=>t.payload&&r===t.payload.entityName);default:return _(t=>{let a=t.payload&&t.payload.entityName;return!!a&&e.some(o=>o===a)})}}var K=function(s){return s.Add="Add",s.Delete="Delete",s.Update="Update",s.Upsert="Upsert",s}(K||{}),Mt=class{add(e,r){return r=Array.isArray(r)?r:r?[r]:[],{entityName:e,op:K.Add,entities:r}}delete(e,r){let t=Array.isArray(r)?r:r?[r]:[];return{entityName:e,op:K.Delete,entities:t}}update(e,r){return r=Array.isArray(r)?r:r?[r]:[],{entityName:e,op:K.Update,entities:r}}upsert(e,r){return r=Array.isArray(r)?r:r?[r]:[],{entityName:e,op:K.Upsert,entities:r}}},dn=new Mt;var U=function(s){return s[s.IgnoreChanges=0]="IgnoreChanges",s[s.PreserveChanges=1]="PreserveChanges",s[s.OverwriteChanges=2]="OverwriteChanges",s}(U||{}),$=function(s){return s.CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",s.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",s.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",s.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",s.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",s.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",s.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",s.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",s.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",s}($||{}),It=class{constructor(e,r){this.type=$.CLEAR_COLLECTIONS,this.payload={collections:e,tag:r}}},xt=class{constructor(e,r){this.type=$.LOAD_COLLECTIONS,this.payload={collections:e,tag:r}}},_t=class{constructor(e,r,t){this.type=$.MERGE_QUERY_SET,this.payload={querySet:e,mergeStrategy:r===null?U.PreserveChanges:r,tag:t}}},Nt=class{constructor(e,r){this.cache=e,this.type=$.SET_ENTITY_CACHE,this.payload={cache:e,tag:r}}},wt=class{constructor(e,r,t){this.type=$.SAVE_ENTITIES,t=t||{},e&&(e.tag=e.tag||t.tag),this.payload=A(y({changeSet:e,url:r},t),{tag:e.tag})}},Ut=class{constructor(e,r,t,a){this.type=$.SAVE_ENTITIES_CANCEL,this.payload={correlationId:e,reason:r,entityNames:t,tag:a}}};var p=function(s){return s.CANCEL_PERSIST="@ngrx/data/cancel-persist",s.CANCELED_PERSIST="@ngrx/data/canceled-persist",s.QUERY_ALL="@ngrx/data/query-all",s.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",s.QUERY_ALL_ERROR="@ngrx/data/query-all/error",s.QUERY_LOAD="@ngrx/data/query-load",s.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",s.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",s.QUERY_MANY="@ngrx/data/query-many",s.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",s.QUERY_MANY_ERROR="@ngrx/data/query-many/error",s.QUERY_BY_KEY="@ngrx/data/query-by-key",s.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",s.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",s.SAVE_ADD_MANY="@ngrx/data/save/add-many",s.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",s.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",s.SAVE_ADD_ONE="@ngrx/data/save/add-one",s.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",s.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",s.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",s.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",s.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",s.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",s.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",s.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",s.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",s.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",s.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",s.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",s.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",s.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",s.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",s.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",s.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",s.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",s.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",s.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",s.ADD_ALL="@ngrx/data/add-all",s.ADD_MANY="@ngrx/data/add-many",s.ADD_ONE="@ngrx/data/add-one",s.REMOVE_ALL="@ngrx/data/remove-all",s.REMOVE_MANY="@ngrx/data/remove-many",s.REMOVE_ONE="@ngrx/data/remove-one",s.UPDATE_MANY="@ngrx/data/update-many",s.UPDATE_ONE="@ngrx/data/update-one",s.UPSERT_MANY="@ngrx/data/upsert-many",s.UPSERT_ONE="@ngrx/data/upsert-one",s.COMMIT_ALL="@ngrx/data/commit-all",s.COMMIT_MANY="@ngrx/data/commit-many",s.COMMIT_ONE="@ngrx/data/commit-one",s.UNDO_ALL="@ngrx/data/undo-all",s.UNDO_MANY="@ngrx/data/undo-many",s.UNDO_ONE="@ngrx/data/undo-one",s.SET_CHANGE_STATE="@ngrx/data/set-change-state",s.SET_COLLECTION="@ngrx/data/set-collection",s.SET_FILTER="@ngrx/data/set-filter",s.SET_LOADED="@ngrx/data/set-loaded",s.SET_LOADING="@ngrx/data/set-loading",s}(p||{}),Rs="/success",bs="/error";var Qe=class{},Xi=new b("@ngrx/data Plural Names");function ea(s){let e=s.entityName;if(!e)throw new Error("Missing required entityName");s.entityName=e=e.trim();let r=s.selectId||Re,t=s.sortComparer=s.sortComparer||!1,a=Jr({selectId:r,sortComparer:t}),o=s.entityDispatcherOptions||{},d=a.getInitialState(y({entityName:e,filter:"",loaded:!1,loading:!1,changeState:{}},s.additionalCollectionState||{})),i=s.noChangeTracking===!0;return{entityName:e,entityAdapter:a,entityDispatcherOptions:o,initialState:d,metadata:s,noChangeTracking:i,selectId:r,sortComparer:t}}var Ms=new b("@ngrx/data Entity Metadata"),Ge=(()=>{let e=class e{constructor(t){this.definitions={},t&&t.forEach(a=>this.registerMetadataMap(a))}getDefinition(t,a=!0){t=t.trim();let o=this.definitions[t];if(!o&&a)throw new Error(`No EntityDefinition for entity type "${t}".`);return o}registerMetadata(t){if(t){let a=ea(t);this.registerDefinition(a)}}registerMetadataMap(t={}){Object.keys(t||{}).forEach(a=>this.registerMetadata(y({entityName:a},t[a])))}registerDefinition(t){this.definitions[t.entityName]=t}registerDefinitions(t){Object.assign(this.definitions,t)}};e.\u0275fac=function(a){return new(a||e)(m(Ms,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),hn=K.Update;var ze=class{constructor(e){this.message=e,this.message=e||"Canceled by user"}},Yt=(()=>{let e=class e{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Vt=(()=>{let e=class e{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),ta=(()=>{let e=class e{constructor(t,a,o,d){this.correlationIdGenerator=t,this.defaultDispatcherOptions=a,this.store=d,this.reducedActions$=o.pipe(V(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(t){return this.store.dispatch(t),t}cancelSaveEntities(t,a,o,d){if(!t)throw new Error("Missing correlationId");let i=new Ut(t,a,o,d);this.dispatch(i)}clearCollections(t,a){this.dispatch(new It(t,a))}loadCollections(t,a){this.dispatch(new xt(t,a))}mergeQuerySet(t,a,o){this.dispatch(new _t(t,a,o))}setEntityCache(t,a){this.dispatch(new Nt(t,a))}saveEntities(t,a,o){let d=Array.isArray(t)?{changes:t}:t;o=o||{};let i=o.correlationId==null?this.correlationIdGenerator.next():o.correlationId,c=o.isOptimistic==null?this.defaultDispatcherOptions.optimisticSaveEntities||!1:o.isOptimistic===!0,n=o.tag||"Save Entities";o=A(y({},o),{correlationId:i,isOptimistic:c,tag:n});let l=new wt(d,a,o);return this.dispatch(l),this.getSaveEntitiesResponseData$(o.correlationId).pipe(V(1))}getSaveEntitiesResponseData$(t){return this.reducedActions$.pipe(_(a=>a.type===$.SAVE_ENTITIES_SUCCESS||a.type===$.SAVE_ENTITIES_ERROR||a.type===$.SAVE_ENTITIES_CANCEL),_(a=>t===a.payload.correlationId),Y(1),N(a=>a.type===$.SAVE_ENTITIES_CANCEL?de(new ze(a.payload.reason)):a.type===$.SAVE_ENTITIES_SUCCESS?O(a.payload.changeSet):de(a.payload)))}};e.\u0275fac=function(a){return new(a||e)(m(Yt),m(Vt),m(le),m(X))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),$t=class{constructor(e,r,t,a=Re,o,d,i,c){this.entityName=e,this.entityActionFactory=r,this.store=t,this.selectId=a,this.defaultDispatcherOptions=o,this.reducedActions$=d,this.correlationIdGenerator=c,this.guard=new qe(e,a),this.toUpdate=Ds(a);let n=ce(i,l=>l[e]);this.entityCollection$=t.select(n)}createEntityAction(e,r,t){return this.entityActionFactory.create(y({entityName:this.entityName,entityOp:e,data:r},t))}createAndDispatch(e,r,t){let a=this.createEntityAction(e,r,t);return this.dispatch(a),a}dispatch(e){return this.store.dispatch(e),e}add(e,r){r=this.setSaveEntityActionOptions(r,this.defaultDispatcherOptions.optimisticAdd);let t=this.createEntityAction(p.SAVE_ADD_ONE,e,r);return r.isOptimistic&&this.guard.mustBeEntity(t),this.dispatch(t),this.getResponseData$(r.correlationId).pipe(W(this.entityCollection$),S(([a,o])=>o.entities[this.selectId(a)]),V(1))}cancel(e,r,t){if(!e)throw new Error("Missing correlationId");this.createAndDispatch(p.CANCEL_PERSIST,r,{correlationId:e})}delete(e,r){r=this.setSaveEntityActionOptions(r,this.defaultDispatcherOptions.optimisticDelete);let t=this.getKey(e),a=this.createEntityAction(p.SAVE_DELETE_ONE,t,r);return this.guard.mustBeKey(a),this.dispatch(a),this.getResponseData$(r.correlationId).pipe(S(()=>t),V(1))}getAll(e){e=this.setQueryEntityActionOptions(e);let r=this.createEntityAction(p.QUERY_ALL,null,e);return this.dispatch(r),this.getResponseData$(e.correlationId).pipe(W(this.entityCollection$),S(([t,a])=>t.reduce((o,d)=>{let i=a.entities[this.selectId(d)];return i&&o.push(i),o},[])),V(1))}getByKey(e,r){r=this.setQueryEntityActionOptions(r);let t=this.createEntityAction(p.QUERY_BY_KEY,e,r);return this.dispatch(t),this.getResponseData$(r.correlationId).pipe(W(this.entityCollection$),S(([a,o])=>o.entities[this.selectId(a)]),V(1))}getWithQuery(e,r){r=this.setQueryEntityActionOptions(r);let t=this.createEntityAction(p.QUERY_MANY,e,r);return this.dispatch(t),this.getResponseData$(r.correlationId).pipe(W(this.entityCollection$),S(([a,o])=>a.reduce((d,i)=>{let c=o.entities[this.selectId(i)];return c&&d.push(c),d},[])),V(1))}load(e){e=this.setQueryEntityActionOptions(e);let r=this.createEntityAction(p.QUERY_LOAD,null,e);return this.dispatch(r),this.getResponseData$(e.correlationId).pipe(V(1))}loadWithQuery(e,r){r=this.setQueryEntityActionOptions(r);let t=this.createEntityAction(p.QUERY_MANY,e,r);return this.dispatch(t),this.getResponseData$(r.correlationId).pipe(V(1))}update(e,r){let t=this.toUpdate(e);r=this.setSaveEntityActionOptions(r,this.defaultDispatcherOptions.optimisticUpdate);let a=this.createEntityAction(p.SAVE_UPDATE_ONE,t,r);return r.isOptimistic&&this.guard.mustBeUpdate(a),this.dispatch(a),this.getResponseData$(r.correlationId).pipe(S(o=>o.changes),W(this.entityCollection$),S(([o,d])=>d.entities[this.selectId(o)]),V(1))}upsert(e,r){r=this.setSaveEntityActionOptions(r,this.defaultDispatcherOptions.optimisticUpsert);let t=this.createEntityAction(p.SAVE_UPSERT_ONE,e,r);return r.isOptimistic&&this.guard.mustBeEntity(t),this.dispatch(t),this.getResponseData$(r.correlationId).pipe(W(this.entityCollection$),S(([a,o])=>o.entities[this.selectId(a)]),V(1))}addAllToCache(e,r){this.createAndDispatch(p.ADD_ALL,e,r)}addOneToCache(e,r){this.createAndDispatch(p.ADD_ONE,e,r)}addManyToCache(e,r){this.createAndDispatch(p.ADD_MANY,e,r)}clearCache(e){this.createAndDispatch(p.REMOVE_ALL,void 0,e)}removeOneFromCache(e,r){this.createAndDispatch(p.REMOVE_ONE,this.getKey(e),r)}removeManyFromCache(e,r){if(!e||e.length===0)return;let t=typeof e[0]=="object"?e.map(a=>this.getKey(a)):e;this.createAndDispatch(p.REMOVE_MANY,t,r)}updateOneInCache(e,r){let t=this.toUpdate(e);this.createAndDispatch(p.UPDATE_ONE,t,r)}updateManyInCache(e,r){if(!e||e.length===0)return;let t=e.map(a=>this.toUpdate(a));this.createAndDispatch(p.UPDATE_MANY,t,r)}upsertOneInCache(e,r){this.createAndDispatch(p.UPSERT_ONE,e,r)}upsertManyInCache(e,r){!e||e.length===0||this.createAndDispatch(p.UPSERT_MANY,e,r)}setFilter(e){this.createAndDispatch(p.SET_FILTER,e)}setLoaded(e){this.createAndDispatch(p.SET_LOADED,!!e)}setLoading(e){this.createAndDispatch(p.SET_LOADING,!!e)}getKey(e){return typeof e=="object"?this.selectId(e):e}getResponseData$(e){return this.reducedActions$.pipe(_(r=>!!r.payload),_(r=>{let{correlationId:t,entityName:a,entityOp:o}=r.payload;return a===this.entityName&&t===e&&(o.endsWith(Rs)||o.endsWith(bs)||o===p.CANCEL_PERSIST)}),Y(1),N(r=>{let{entityOp:t}=r.payload;return t===p.CANCEL_PERSIST?de(new ze(r.payload.data)):t.endsWith(Rs)?O(r.payload.data):de(r.payload.data.error)}))}setQueryEntityActionOptions(e){e=e||{};let r=e.correlationId==null?this.correlationIdGenerator.next():e.correlationId;return A(y({},e),{correlationId:r})}setSaveEntityActionOptions(e,r){e=e||{};let t=e.correlationId==null?this.correlationIdGenerator.next():e.correlationId,a=e.isOptimistic==null?r||!1:e.isOptimistic===!0;return A(y({},e),{correlationId:t,isOptimistic:a})}},We="entityCache",Kt=new b("@ngrx/data Entity Cache Name"),Is=new b("@ngrx/data Entity Cache Meta Reducers"),xs=new b("@ngrx/data Entity Collection Meta Reducers"),ra=new b("@ngrx/data Initial Entity Cache State"),Ze=new b("@ngrx/data Entity Cache Selector"),sa={provide:Ze,useFactory:_s,deps:[[new Tr,Kt]]};function _s(s){return s=s||We,lt(s)}var Bt=(()=>{let e=class e{constructor(t,a,o,d,i,c){this.entityActionFactory=t,this.store=a,this.entityDispatcherDefaultOptions=o,this.entityCacheSelector=i,this.correlationIdGenerator=c,this.reducedActions$=d.pipe(V(1)),this.raSubscription=this.reducedActions$.subscribe()}create(t,a=Re,o={}){let d=y(y({},this.entityDispatcherDefaultOptions),o);return new $t(t,this.entityActionFactory,this.store,a,d,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}};e.\u0275fac=function(a){return new(a||e)(m(ks),m(X),m(Vt),m(le),m(Ze),m(Yt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),ln=new b("@ngrx/data Entity Effects Scheduler");var pn=[p.QUERY_ALL,p.QUERY_LOAD,p.QUERY_BY_KEY,p.QUERY_MANY,p.SAVE_ADD_ONE,p.SAVE_DELETE_ONE,p.SAVE_UPDATE_ONE,p.SAVE_UPSERT_ONE];var Lt=class{constructor(e,r){this.entityName=e,e=e.trim();let{dispatcher:t,selectors:a,selectors$:o}=r.create(e);this.entityName=e,this.dispatcher=t,this.guard=t.guard,this.selectId=t.selectId,this.toUpdate=t.toUpdate,this.selectors=a,this.selectors$=o,this.collection$=o.collection$,this.count$=o.count$,this.entities$=o.entities$,this.entityActions$=o.entityActions$,this.entityMap$=o.entityMap$,this.errors$=o.errors$,this.filter$=o.filter$,this.filteredEntities$=o.filteredEntities$,this.keys$=o.keys$,this.loaded$=o.loaded$,this.loading$=o.loading$,this.changeState$=o.changeState$}createEntityAction(e,r,t){return this.dispatcher.createEntityAction(e,r,t)}createAndDispatch(e,r,t){return this.dispatcher.createAndDispatch(e,r,t)}dispatch(e){return this.dispatcher.dispatch(e)}get store(){return this.dispatcher.store}add(e,r){return this.dispatcher.add(e,r)}cancel(e,r,t){this.dispatcher.cancel(e,r,t)}delete(e,r){return this.dispatcher.delete(e,r)}getAll(e){return this.dispatcher.getAll(e)}getByKey(e,r){return this.dispatcher.getByKey(e,r)}getWithQuery(e,r){return this.dispatcher.getWithQuery(e,r)}load(e){return this.dispatcher.load(e)}loadWithQuery(e,r){return this.dispatcher.loadWithQuery(e,r)}update(e,r){return this.dispatcher.update(e,r)}upsert(e,r){return this.dispatcher.upsert(e,r)}addAllToCache(e,r){this.dispatcher.addAllToCache(e,r)}addOneToCache(e,r){this.dispatcher.addOneToCache(e,r)}addManyToCache(e,r){this.dispatcher.addManyToCache(e,r)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(e,r){this.dispatcher.removeOneFromCache(e,r)}removeManyFromCache(e,r){this.dispatcher.removeManyFromCache(e,r)}updateOneInCache(e,r){this.dispatcher.updateOneInCache(e,r)}updateManyInCache(e,r){this.dispatcher.updateManyInCache(e,r)}upsertOneInCache(e,r){this.dispatcher.upsertOneInCache(e,r)}upsertManyInCache(e,r){this.dispatcher.upsertManyInCache(e,r)}setFilter(e){this.dispatcher.setFilter(e)}setLoaded(e){this.dispatcher.setLoaded(!!e)}setLoading(e){this.dispatcher.setLoading(!!e)}},He=(()=>{let e=class e{constructor(t){this.entityDefinitionService=t}create(t){let a=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(t,!1);return a&&a.initialState||ia(t)}};e.\u0275fac=function(a){return new(a||e)(m(Ge,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();function ia(s){return{entityName:s,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}var Ns=(()=>{let e=class e{constructor(t,a){this.entityCollectionCreator=t||new He,this.selectEntityCache=a||_s(We)}createCollectionSelector(t){let a=(o={})=>o[t]||this.entityCollectionCreator.create(t);return ce(this.selectEntityCache,a)}createCollectionSelectors(t){let a=typeof t=="string"?{entityName:t}:t,o=C=>C.ids,d=C=>C.entities,i=ce(o,d,(C,P)=>C.map(te=>P[te])),c=ce(o,C=>C.length),n=C=>C.filter,l=a.filterFn,u=l?ce(i,n,(C,P)=>l(C,P)):i,f=C=>C.loaded,E=C=>C.loading,v=C=>C.changeState,T=a.additionalCollectionState||{},j={};return Object.keys(T).forEach(C=>{j["select"+C[0].toUpperCase()+C.slice(1)]=P=>P[C]}),y({selectCount:c,selectEntities:i,selectEntityMap:d,selectFilter:n,selectFilteredEntities:u,selectKeys:o,selectLoaded:f,selectLoading:E,selectChangeState:v},j)}create(t){let a=typeof t=="string"?{entityName:t}:t,o=a.entityName,d=this.createCollectionSelector(o),i=this.createCollectionSelectors(a),c={};return Object.keys(i).forEach(n=>{c[n]=ce(d,i[n])}),y({entityName:o,selectCollection:d,selectEntityCache:this.selectEntityCache},c)}};e.\u0275fac=function(a){return new(a||e)(m(He,8),m(Ze,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),qt=(()=>{let e=class e{constructor(t,a,o){this.store=t,this.actions=a,this.selectEntityCache=o,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=a.pipe(_(d=>d.payload&&d.payload.entityOp&&d.payload.entityOp.endsWith(bs)),V(1))}create(t,a){let o={entityName:t};return Object.keys(a).forEach(d=>{if(d.startsWith("select")){let i=d[6].toLowerCase()+d.substring(7)+"$";o[i]=this.store.select(a[d])}}),o.entityActions$=this.actions.pipe(Os(t)),o.errors$=this.entityActionErrors$.pipe(Os(t)),o}};e.\u0275fac=function(a){return new(a||e)(m(X),m(Ee),m(Ze))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),ws=(()=>{let e=class e{constructor(t,a,o,d){this.entityDispatcherFactory=t,this.entityDefinitionService=a,this.entitySelectorsFactory=o,this.entitySelectors$Factory=d}create(t){t=t.trim();let a=this.entityDefinitionService.getDefinition(t),o=this.entityDispatcherFactory.create(t,a.selectId,a.entityDispatcherOptions),d=this.entitySelectorsFactory.create(a.metadata),i=this.entitySelectors$Factory.create(t,d);return{dispatcher:o,entityName:t,selectors:d,selectors$:i}}};e.\u0275fac=function(a){return new(a||e)(m(Bt),m(Ge),m(Ns),m(qt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Us=(()=>{let e=class e{constructor(t){this.entityCollectionServiceElementsFactory=t}create(t){return new Lt(t,this.entityCollectionServiceElementsFactory)}};e.\u0275fac=function(a){return new(a||e)(m(ws))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),$s=(()=>{let e=class e{constructor(t,a,o,d){this.entityCollectionServiceFactory=t,this.store=d,this.entityActionErrors$=o.entityActionErrors$,this.entityCache$=o.entityCache$,this.reducedActions$=a.reducedActions$}};e.\u0275fac=function(a){return new(a||e)(m(Us),m(Bt),m(qt),m(X))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),aa=(()=>{let e=class e{constructor(t){this.entityServicesElements=t,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(t){this.store.dispatch(t)}createEntityCollectionService(t){return this.entityCollectionServiceFactory.create(t)}getEntityCollectionService(t){let a=this.EntityCollectionServices[t];return a||(a=this.createEntityCollectionService(t),this.EntityCollectionServices[t]=a),a}registerEntityCollectionService(t,a){this.EntityCollectionServices[a||t.entityName]=t}registerEntityCollectionServices(t){Array.isArray(t)?t.forEach(a=>this.registerEntityCollectionService(a)):Object.keys(t||{}).forEach(a=>{this.registerEntityCollectionService(t[a],a)})}};e.\u0275fac=function(a){return new(a||e)(m($s))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Ft=class{},F=function(s){return s[s.Unchanged=0]="Unchanged",s[s.Added=1]="Added",s[s.Deleted=2]="Deleted",s[s.Updated=3]="Updated",s}(F||{}),Pt=class{constructor(e,r){this.adapter=e,this.selectId=r,this.selectId=r||Re}commitAll(e){return Object.keys(e.changeState).length===0?e:A(y({},e),{changeState:{}})}commitMany(e,r){if(e==null||e.length===0)return r;let t=!1,a=e.reduce((o,d)=>{let i=typeof d=="object"?this.selectId(d):d;return o[i]&&(t||(o=y({},o),t=!0),delete o[i]),o},r.changeState);return t?A(y({},r),{changeState:a}):r}commitOne(e,r){return e==null?r:this.commitMany([e],r)}mergeQueryResults(e,r,t){return this.mergeServerUpserts(e,r,U.PreserveChanges,t)}mergeSaveAdds(e,r,t){return this.mergeServerUpserts(e,r,U.OverwriteChanges,t)}mergeSaveDeletes(e,r,t){t=t??U.OverwriteChanges;let a=e;return r=t===U.IgnoreChanges?r:this.commitMany(a,r),this.adapter.removeMany(a,r)}mergeSaveUpdates(e,r,t,a=!1){if(e==null||e.length===0)return r;let o=!1,d=r.changeState;t=t??U.OverwriteChanges;let i;switch(t){case U.IgnoreChanges:return i=c(e),this.adapter.updateMany(i,r);case U.OverwriteChanges:return d=e.reduce((n,l)=>{let u=l.id;return n[u]&&(o||(n=y({},n),o=!0),delete n[u]),n},r.changeState),r=o?A(y({},r),{changeState:d}):r,i=c(e),this.adapter.updateMany(i,r);case U.PreserveChanges:{let n=[];return d=e.reduce((l,u)=>{let f=u.id,E=l[f];if(E){o||(l=y({},l),o=!0);let v=this.selectId(u.changes),T=E;v!==f&&delete l[f];let j=y(y({},T.originalValue),u.changes);l[v]=A(y({},T),{originalValue:j})}else n.push(u);return l},r.changeState),r=o?A(y({},r),{changeState:d}):r,i=c(n),this.adapter.updateMany(i,r)}}function c(n){return a===!0&&(n=n.filter(l=>l.changed===!0)),n.map(l=>({id:l.id,changes:l.changes}))}}mergeSaveUpserts(e,r,t){return this.mergeServerUpserts(e,r,U.OverwriteChanges,t)}mergeServerUpserts(e,r,t,a){if(e==null||e.length===0)return r;let o=!1,d=r.changeState;switch(a=a??t,a){case U.IgnoreChanges:return this.adapter.upsertMany(e,r);case U.OverwriteChanges:return r=this.adapter.upsertMany(e,r),d=e.reduce((i,c)=>{let n=this.selectId(c);return i[n]&&(o||(i=y({},i),o=!0),delete i[n]),i},r.changeState),o?A(y({},r),{changeState:d}):r;case U.PreserveChanges:{let i=[];return d=e.reduce((c,n)=>{let l=this.selectId(n);return c[l]?o||(c=A(y({},c),{[l]:A(y({},c[l]),{originalValue:n})}),o=!0):i.push(n),c},r.changeState),r=this.adapter.upsertMany(i,r),o?A(y({},r),{changeState:d}):r}}}trackAddMany(e,r,t){if(t===U.IgnoreChanges||e==null||e.length===0)return r;let a=!1,o=e.reduce((d,i)=>{let c=this.selectId(i);if(c==null||c==="")throw new Error(`${r.entityName} entity add requires a key to be tracked`);return d[c]||(a||(a=!0,d=y({},d)),d[c]={changeType:F.Added}),d},r.changeState);return a?A(y({},r),{changeState:o}):r}trackAddOne(e,r,t){return e==null?r:this.trackAddMany([e],r,t)}trackDeleteMany(e,r,t){if(t===U.IgnoreChanges||e==null||e.length===0)return r;let a=!1,o=r.entities,d=e.reduce((i,c)=>{let n=o[c];if(n){let u=i[c];u?u.changeType===F.Added?(l(),delete i[c]):u.changeType===F.Updated&&(l(),i[c]=A(y({},i[c]),{changeType:F.Deleted})):(l(),i[c]={changeType:F.Deleted,originalValue:n})}return i;function l(){a||(a=!0,i=y({},i))}},r.changeState);return a?A(y({},r),{changeState:d}):r}trackDeleteOne(e,r,t){return e==null?r:this.trackDeleteMany([e],r,t)}trackUpdateMany(e,r,t){if(t===U.IgnoreChanges||e==null||e.length===0)return r;let a=!1,o=r.entities,d=e.reduce((i,c)=>{let{id:n,changes:l}=c;if(n==null||n==="")throw new Error(`${r.entityName} entity update requires a key to be tracked`);let u=o[n];return u&&(i[n]||(a||(a=!0,i=y({},i)),i[n]={changeType:F.Updated,originalValue:u})),i},r.changeState);return a?A(y({},r),{changeState:d}):r}trackUpdateOne(e,r,t){return e==null?r:this.trackUpdateMany([e],r,t)}trackUpsertMany(e,r,t){if(t===U.IgnoreChanges||e==null||e.length===0)return r;let a=!1,o=r.entities,d=e.reduce((i,c)=>{let n=this.selectId(c);if(n==null||n==="")throw new Error(`${r.entityName} entity upsert requires a key to be tracked`);if(!i[n]){a||(a=!0,i=y({},i));let u=o[n];i[n]=u==null?{changeType:F.Added}:{changeType:F.Updated,originalValue:u}}return i},r.changeState);return a?A(y({},r),{changeState:d}):r}trackUpsertOne(e,r,t){return e==null?r:this.trackUpsertMany([e],r,t)}undoAll(e){let r=Object.keys(e.changeState),{remove:t,upsert:a}=r.reduce((o,d)=>{let i=o.chgState[d];switch(i.changeType){case F.Added:o.remove.push(d);break;case F.Deleted:let c=i.originalValue;c&&o.upsert.push(c);break;case F.Updated:o.upsert.push(i.originalValue);break}return o},{remove:[],upsert:[],chgState:e.changeState});return e=this.adapter.removeMany(t,e),e=this.adapter.upsertMany(a,e),A(y({},e),{changeState:{}})}undoMany(e,r){if(e==null||e.length===0)return r;let t=!1,{changeState:a,remove:o,upsert:d}=e.reduce((i,c)=>{let n=i.changeState,l=typeof c=="object"?this.selectId(c):c,u=n[l];if(u)switch(t||(n=y({},n),t=!0),delete n[l],i.changeState=n,u.changeType){case F.Added:i.remove.push(l);break;case F.Deleted:let f=u.originalValue;f&&i.upsert.push(f);break;case F.Updated:i.upsert.push(u.originalValue);break}return i},{remove:[],upsert:[],changeState:r.changeState});return r=this.adapter.removeMany(o,r),r=this.adapter.upsertMany(d,r),t?A(y({},r),{changeState:a}):r}undoOne(e,r){return e==null?r:this.undoMany([e],r)}},jt=class{constructor(e,r,t){this.entityName=e,this.definition=r,this.methods={[p.CANCEL_PERSIST]:this.cancelPersist.bind(this),[p.QUERY_ALL]:this.queryAll.bind(this),[p.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[p.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[p.QUERY_BY_KEY]:this.queryByKey.bind(this),[p.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[p.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[p.QUERY_LOAD]:this.queryLoad.bind(this),[p.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[p.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[p.QUERY_MANY]:this.queryMany.bind(this),[p.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[p.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[p.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[p.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[p.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[p.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[p.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[p.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[p.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[p.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[p.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[p.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[p.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[p.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[p.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[p.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[p.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[p.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[p.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[p.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[p.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[p.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[p.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[p.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[p.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[p.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[p.ADD_ALL]:this.addAll.bind(this),[p.ADD_MANY]:this.addMany.bind(this),[p.ADD_ONE]:this.addOne.bind(this),[p.REMOVE_ALL]:this.removeAll.bind(this),[p.REMOVE_MANY]:this.removeMany.bind(this),[p.REMOVE_ONE]:this.removeOne.bind(this),[p.UPDATE_MANY]:this.updateMany.bind(this),[p.UPDATE_ONE]:this.updateOne.bind(this),[p.UPSERT_MANY]:this.upsertMany.bind(this),[p.UPSERT_ONE]:this.upsertOne.bind(this),[p.COMMIT_ALL]:this.commitAll.bind(this),[p.COMMIT_MANY]:this.commitMany.bind(this),[p.COMMIT_ONE]:this.commitOne.bind(this),[p.UNDO_ALL]:this.undoAll.bind(this),[p.UNDO_MANY]:this.undoMany.bind(this),[p.UNDO_ONE]:this.undoOne.bind(this),[p.SET_CHANGE_STATE]:this.setChangeState.bind(this),[p.SET_COLLECTION]:this.setCollection.bind(this),[p.SET_FILTER]:this.setFilter.bind(this),[p.SET_LOADED]:this.setLoaded.bind(this),[p.SET_LOADING]:this.setLoading.bind(this)},this.adapter=r.entityAdapter,this.isChangeTracking=r.noChangeTracking!==!0,this.selectId=r.selectId,this.guard=new qe(e,this.selectId),this.toUpdate=Ds(this.selectId),this.entityChangeTracker=t||new Pt(this.adapter,this.selectId)}cancelPersist(e){return this.setLoadingFalse(e)}queryAll(e){return this.setLoadingTrue(e)}queryAllError(e,r){return this.setLoadingFalse(e)}queryAllSuccess(e,r){let t=this.extractData(r),a=this.extractMergeStrategy(r);return A(y({},this.entityChangeTracker.mergeQueryResults(t,e,a)),{loaded:!0,loading:!1})}queryByKey(e,r){return this.setLoadingTrue(e)}queryByKeyError(e,r){return this.setLoadingFalse(e)}queryByKeySuccess(e,r){let t=this.extractData(r),a=this.extractMergeStrategy(r);return e=t==null?e:this.entityChangeTracker.mergeQueryResults([t],e,a),this.setLoadingFalse(e)}queryLoad(e){return this.setLoadingTrue(e)}queryLoadError(e,r){return this.setLoadingFalse(e)}queryLoadSuccess(e,r){let t=this.extractData(r);return A(y({},this.adapter.setAll(t,e)),{loading:!1,loaded:!0,changeState:{}})}queryMany(e,r){return this.setLoadingTrue(e)}queryManyError(e,r){return this.setLoadingFalse(e)}queryManySuccess(e,r){let t=this.extractData(r),a=this.extractMergeStrategy(r);return A(y({},this.entityChangeTracker.mergeQueryResults(t,e,a)),{loaded:!0,loading:!1})}saveAddMany(e,r){if(this.isOptimistic(r)){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackAddMany(t,e,a),e=this.adapter.addMany(t,e)}return this.setLoadingTrue(e)}saveAddManyError(e,r){return this.setLoadingFalse(e)}saveAddManySuccess(e,r){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);return this.isOptimistic(r)?e=this.entityChangeTracker.mergeSaveUpserts(t,e,a):e=this.entityChangeTracker.mergeSaveAdds(t,e,a),this.setLoadingFalse(e)}saveAddOne(e,r){if(this.isOptimistic(r)){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackAddOne(t,e,a),e=this.adapter.addOne(t,e)}return this.setLoadingTrue(e)}saveAddOneError(e,r){return this.setLoadingFalse(e)}saveAddOneSuccess(e,r){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);if(this.isOptimistic(r)){let o=this.toUpdate(t);e=this.entityChangeTracker.mergeSaveUpdates([o],e,a,!1)}else e=this.entityChangeTracker.mergeSaveAdds([t],e,a);return this.setLoadingFalse(e)}saveDeleteOne(e,r){let t=this.extractData(r),a=typeof t=="object"?this.selectId(t):t,o=e.changeState[a];if(o&&(o.changeType===F.Added?(e=this.adapter.removeOne(a,e),e=this.entityChangeTracker.commitOne(a,e),r.payload.skip=!0):e=this.entityChangeTracker.trackDeleteOne(a,e)),this.isOptimistic(r)){let d=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackDeleteOne(a,e,d),e=this.adapter.removeOne(a,e)}return this.setLoadingTrue(e)}saveDeleteOneError(e,r){return this.setLoadingFalse(e)}saveDeleteOneSuccess(e,r){let t=this.extractData(r);if(this.isOptimistic(r)){let a=this.extractMergeStrategy(r);e=this.entityChangeTracker.mergeSaveDeletes([t],e,a)}else e=this.adapter.removeOne(t,e),e=this.entityChangeTracker.commitOne(t,e);return this.setLoadingFalse(e)}saveDeleteMany(e,r){let t=this.extractData(r).map(a=>typeof a=="object"?this.selectId(a):a);if(t.forEach(a=>{let o=e.changeState[a];o&&(o.changeType===F.Added?(e=this.adapter.removeOne(a,e),e=this.entityChangeTracker.commitOne(a,e),r.payload.skip=!0):e=this.entityChangeTracker.trackDeleteOne(a,e))}),this.isOptimistic(r)){let a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackDeleteMany(t,e,a),e=this.adapter.removeMany(t,e)}return this.setLoadingTrue(e)}saveDeleteManyError(e,r){return this.setLoadingFalse(e)}saveDeleteManySuccess(e,r){let t=this.extractData(r);if(this.isOptimistic(r)){let a=this.extractMergeStrategy(r);e=this.entityChangeTracker.mergeSaveDeletes(t,e,a)}else e=this.adapter.removeMany(t,e),e=this.entityChangeTracker.commitMany(t,e);return this.setLoadingFalse(e)}saveUpdateOne(e,r){let t=this.guard.mustBeUpdate(r);if(this.isOptimistic(r)){let a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackUpdateOne(t,e,a),e=this.adapter.updateOne(t,e)}return this.setLoadingTrue(e)}saveUpdateOneError(e,r){return this.setLoadingFalse(e)}saveUpdateOneSuccess(e,r){let t=this.guard.mustBeUpdateResponse(r),a=this.isOptimistic(r),o=this.extractMergeStrategy(r);return e=this.entityChangeTracker.mergeSaveUpdates([t],e,o,a),this.setLoadingFalse(e)}saveUpdateMany(e,r){let t=this.guard.mustBeUpdates(r);if(this.isOptimistic(r)){let a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackUpdateMany(t,e,a),e=this.adapter.updateMany(t,e)}return this.setLoadingTrue(e)}saveUpdateManyError(e,r){return this.setLoadingFalse(e)}saveUpdateManySuccess(e,r){let t=this.guard.mustBeUpdateResponses(r),a=this.isOptimistic(r),o=this.extractMergeStrategy(r);return e=this.entityChangeTracker.mergeSaveUpdates(t,e,o,!1),this.setLoadingFalse(e)}saveUpsertOne(e,r){if(this.isOptimistic(r)){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackUpsertOne(t,e,a),e=this.adapter.upsertOne(t,e)}return this.setLoadingTrue(e)}saveUpsertOneError(e,r){return this.setLoadingFalse(e)}saveUpsertOneSuccess(e,r){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.mergeSaveUpserts([t],e,a),this.setLoadingFalse(e)}saveUpsertMany(e,r){if(this.isOptimistic(r)){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);e=this.entityChangeTracker.trackUpsertMany(t,e,a),e=this.adapter.upsertMany(t,e)}return this.setLoadingTrue(e)}saveUpsertManyError(e,r){return this.setLoadingFalse(e)}saveUpsertManySuccess(e,r){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.mergeSaveUpserts(t,e,a),this.setLoadingFalse(e)}addAll(e,r){let t=this.guard.mustBeEntities(r);return A(y({},this.adapter.setAll(t,e)),{loading:!1,loaded:!0,changeState:{}})}addMany(e,r){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackAddMany(t,e,a),this.adapter.addMany(t,e)}addOne(e,r){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackAddOne(t,e,a),this.adapter.addOne(t,e)}removeMany(e,r){let t=this.guard.mustBeKeys(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackDeleteMany(t,e,a),this.adapter.removeMany(t,e)}removeOne(e,r){let t=this.guard.mustBeKey(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackDeleteOne(t,e,a),this.adapter.removeOne(t,e)}removeAll(e,r){return A(y({},this.adapter.removeAll(e)),{loaded:!1,loading:!1,changeState:{}})}updateMany(e,r){let t=this.guard.mustBeUpdates(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackUpdateMany(t,e,a),this.adapter.updateMany(t,e)}updateOne(e,r){let t=this.guard.mustBeUpdate(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackUpdateOne(t,e,a),this.adapter.updateOne(t,e)}upsertMany(e,r){let t=this.guard.mustBeEntities(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackUpsertMany(t,e,a),this.adapter.upsertMany(t,e)}upsertOne(e,r){let t=this.guard.mustBeEntity(r),a=this.extractMergeStrategy(r);return e=this.entityChangeTracker.trackUpsertOne(t,e,a),this.adapter.upsertOne(t,e)}commitAll(e){return this.entityChangeTracker.commitAll(e)}commitMany(e,r){return this.entityChangeTracker.commitMany(this.extractData(r),e)}commitOne(e,r){return this.entityChangeTracker.commitOne(this.extractData(r),e)}undoAll(e){return this.entityChangeTracker.undoAll(e)}undoMany(e,r){return this.entityChangeTracker.undoMany(this.extractData(r),e)}undoOne(e,r){return this.entityChangeTracker.undoOne(this.extractData(r),e)}setChangeState(e,r){let t=this.extractData(r);return e.changeState===t?e:A(y({},e),{changeState:t})}setCollection(e,r){let t=this.extractData(r);return e===t?e:t}setFilter(e,r){let t=this.extractData(r);return e.filter===t?e:A(y({},e),{filter:t})}setLoaded(e,r){let t=this.extractData(r)===!0||!1;return e.loaded===t?e:A(y({},e),{loaded:t})}setLoading(e,r){return this.setLoadingFlag(e,this.extractData(r))}setLoadingFalse(e){return this.setLoadingFlag(e,!1)}setLoadingTrue(e){return this.setLoadingFlag(e,!0)}setLoadingFlag(e,r){return r=r===!0,e.loading===r?e:A(y({},e),{loading:r})}extractData(e){return e.payload&&e.payload.data}extractMergeStrategy(e){return this.isChangeTracking?e.payload&&e.payload.mergeStrategy:U.IgnoreChanges}isOptimistic(e){return e.payload&&e.payload.isOptimistic===!0}},Ls=(()=>{let e=class e{constructor(t){this.entityDefinitionService=t}create(t){let a=this.entityDefinitionService.getDefinition(t);return new jt(t,a).methods}};e.\u0275fac=function(a){return new(a||e)(m(Ge))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Fs=(()=>{let e=class e{constructor(t){this.methodsFactory=t}create(t){let a=this.methodsFactory.create(t);return function(d,i){let c=a[i.payload.entityOp];return c?c(d,i):d}}};e.\u0275fac=function(a){return new(a||e)(m(Ls))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Ps=(()=>{let e=class e{constructor(t,a){this.entityCollectionReducerFactory=t,this.entityCollectionReducers={},this.entityCollectionMetaReducer=Qr.apply(null,a||[])}getOrCreateReducer(t){let a=this.entityCollectionReducers[t];return a||(a=this.entityCollectionReducerFactory.create(t),a=this.registerReducer(t,a),this.entityCollectionReducers[t]=a),a}registerReducer(t,a){return a=this.entityCollectionMetaReducer(a),this.entityCollectionReducers[t.trim()]=a}registerReducers(t){(t?Object.keys(t):[]).forEach(o=>this.registerReducer(o,t[o]))}};e.\u0275fac=function(a){return new(a||e)(m(Fs),m(xs,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),js=(()=>{let e=class e{constructor(t,a,o){this.entityCollectionCreator=t,this.entityCollectionReducerRegistry=a,this.logger=o}create(){return t.bind(this);function t(a={},o){switch(o.type){case $.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(a,o);case $.LOAD_COLLECTIONS:return this.loadCollectionsReducer(a,o);case $.MERGE_QUERY_SET:return this.mergeQuerySetReducer(a,o);case $.SAVE_ENTITIES:return this.saveEntitiesReducer(a,o);case $.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(a,o);case $.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(a,o);case $.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(a,o);case $.SET_ENTITY_CACHE:return o.payload.cache}let d=o.payload;return d&&d.entityName&&d.entityOp&&!d.error?this.applyCollectionReducer(a,o):a}}clearCollectionsReducer(t,a){let{collections:o,tag:d}=a.payload,i=p.REMOVE_ALL;return o||(o=Object.keys(t)),t=o.reduce((c,n)=>{let l={entityName:n,entityOp:i},u={type:`[${n}] ${a.type}`,payload:l};return c=this.applyCollectionReducer(c,u),c},t),t}loadCollectionsReducer(t,a){let{collections:o,tag:d}=a.payload,i=p.ADD_ALL;return t=Object.keys(o).reduce((n,l)=>{let u={entityName:l,entityOp:i,data:o[l]},f={type:`[${l}] ${a.type}`,payload:u};return n=this.applyCollectionReducer(n,f),n},t),t}mergeQuerySetReducer(t,a){let{mergeStrategy:o,querySet:d,tag:i}=a.payload;o=o===null?U.PreserveChanges:o;let c=p.QUERY_MANY_SUCCESS;return t=Object.keys(d).reduce((l,u)=>{let f={entityName:u,entityOp:c,data:d[u],mergeStrategy:o},E={type:`[${u}] ${a.type}`,payload:f};return l=this.applyCollectionReducer(l,E),l},t),t}saveEntitiesReducer(t,a){let{changeSet:o,correlationId:d,isOptimistic:i,mergeStrategy:c,tag:n}=a.payload;try{o.changes.forEach(u=>{let f=u.entityName,E={entityName:f,entityOp:l(u),data:u.entities,correlationId:d,isOptimistic:i,mergeStrategy:c,tag:n},v={type:`[${f}] ${a.type}`,payload:E};if(t=this.applyCollectionReducer(t,v),v.payload.error)throw v.payload.error})}catch(u){a.payload.error=u}return t;function l(u){switch(u.op){case K.Add:return p.SAVE_ADD_MANY;case K.Delete:return p.SAVE_DELETE_MANY;case K.Update:return p.SAVE_UPDATE_MANY;case K.Upsert:return p.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(t,a){return this.clearLoadingFlags(t,a.payload.entityNames||[])}saveEntitiesErrorReducer(t,a){let i=a.payload.originalAction.payload.changeSet.changes.map(c=>c.entityName);return this.clearLoadingFlags(t,i)}saveEntitiesSuccessReducer(t,a){let{changeSet:o,correlationId:d,isOptimistic:i,mergeStrategy:c,tag:n}=a.payload;return o.changes.forEach(u=>{let f=u.entityName,E={entityName:f,entityOp:l(u),data:u.entities,correlationId:d,isOptimistic:i,mergeStrategy:c,tag:n},v={type:`[${f}] ${a.type}`,payload:E};t=this.applyCollectionReducer(t,v)}),t;function l(u){switch(u.op){case K.Add:return p.SAVE_ADD_MANY_SUCCESS;case K.Delete:return p.SAVE_DELETE_MANY_SUCCESS;case K.Update:return p.SAVE_UPDATE_MANY_SUCCESS;case K.Upsert:return p.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(t={},a){let o=a.payload.entityName,d=t[o],i=this.entityCollectionReducerRegistry.getOrCreateReducer(o),c;try{c=i(d||this.entityCollectionCreator.create(o),a)}catch(n){this.logger.error(n),a.payload.error=n}return a.payload.error||d===c?t:A(y({},t),{[o]:c})}clearLoadingFlags(t,a){let o=!1;return a.forEach(d=>{let i=t[d];i.loading&&(o||(t=y({},t),o=!0),t[d]=A(y({},i),{loading:!1}))}),t}};e.\u0275fac=function(a){return new(a||e)(m(He),m(Ps),m(Qe))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),na=(()=>{let e=class e{error(t,a){t&&(a?console.error(t,a):console.error(t))}log(t,a){t&&(a?console.log(t,a):console.log(t))}warn(t,a){t&&(a?console.warn(t,a):console.warn(t))}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();var oa=[Yt,Vt,ks,ta,js,sa,He,Fs,Ls,Ps,ws,Us,Ge,Bt,Ns,qt,$s,{provide:Kt,useValue:We},{provide:Ft,useClass:aa},{provide:Qe,useClass:na},{provide:he,multi:!0,useValue:()=>ca()}];function ca(){let s=L(Gr),e=L(js),r=L(Kt,{optional:!0}),t=L(ra,{optional:!0}),a=L(Is,{optional:!0}),o=r||We,d=(a||[]).map(n=>n instanceof b?L(n):n),i=typeof t=="function"?t():t,c={key:o,reducers:e.create(),reducerFactory:qr,initialState:i||{},metaReducers:d};s.addFeature(c)}function ua(s){return[{provide:Is,useValue:s.entityCacheMetaReducers?s.entityCacheMetaReducers:[]},{provide:xs,useValue:s.entityCollectionMetaReducers?s.entityCollectionMetaReducers:[]},{provide:Xi,multi:!0,useValue:s.pluralNames?s.pluralNames:{}},{provide:Ms,multi:!0,useValue:s.entityMetadata?s.entityMetadata:[]}]}function Ys(s,...e){return Z([oa,ua(s),...e.map(r=>r.\u0275providers)])}var da={};var Vs={entityMetadata:da};var De="Service workers are disabled or not supported by this browser";function ha(s){return xe(()=>de(new Error(s)))}var Se=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=ha(De);else{let t=at(e,"controllerchange").pipe(S(()=>e.controller)),a=xe(()=>O(e.controller)),o=pr(a,t);this.worker=o.pipe(_(l=>!!l)),this.registration=this.worker.pipe(se(()=>e.getRegistration()));let n=at(e,"message").pipe(S(l=>l.data)).pipe(_(l=>l&&l.type)).pipe(mr());n.connect(),this.events=n}}postMessage(e,r){return this.worker.pipe(Y(1),Ue(t=>{t.postMessage(y({action:e},r))})).toPromise().then(()=>{})}postMessageWithOperation(e,r,t){let a=this.waitForOperationCompleted(t),o=this.postMessage(e,r);return Promise.all([o,a]).then(([,d])=>d)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let r;return typeof e=="string"?r=t=>t.type===e:r=t=>e.includes(t.type),this.events.pipe(_(r))}nextEventOfType(e){return this.eventsOfType(e).pipe(Y(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(_(r=>r.nonce===e),Y(1),S(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},la=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Ie,!t.isEnabled){this.messages=fe,this.notificationClicks=fe,this.subscription=fe;return}this.messages=this.sw.eventsOfType("PUSH").pipe(S(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(S(o=>o.data)),this.pushManager=this.sw.registration.pipe(S(o=>o.pushManager));let a=this.pushManager.pipe(se(o=>o.getSubscription()));this.subscription=H(a,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(De));let a={userVisibleOnly:!0},o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),d=new Uint8Array(new ArrayBuffer(o.length));for(let i=0;i<o.length;i++)d[i]=o.charCodeAt(i);return a.applicationServerKey=d,this.pushManager.pipe(se(i=>i.subscribe(a)),Y(1)).toPromise().then(i=>(this.subscriptionChanges.next(i),i))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(De));let t=a=>{if(a===null)throw new Error("Not subscribed to push notifications.");return a.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Y(1),se(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(a){return new(a||e)(m(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Qt=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=fe,this.unrecoverable=fe;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(De));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(De));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(a){return new(a||e)(m(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();var Ks=new b("NGSW_REGISTER_SCRIPT");function pa(s,e,r,t){return()=>{if(!(ut(t)&&"serviceWorker"in navigator&&r.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let a;if(typeof r.registrationStrategy=="function")a=r.registrationStrategy();else{let[d,...i]=(r.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":a=O(null);break;case"registerWithDelay":a=Bs(+i[0]||0);break;case"registerWhenStable":a=i[0]?H(qs(s),Bs(+i[0])):qs(s);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${r.registrationStrategy}`)}}s.get(Fe).runOutsideAngular(()=>a.pipe(Y(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:r.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function Bs(s){return O(null).pipe(nt(s))}function qs(s){return s.get(Mr).isStable.pipe(_(r=>r))}function fa(s,e){return new Se(ut(e)&&s.enabled!==!1?navigator.serviceWorker:void 0)}var ke=class{};function Qs(s,e={}){return Z([la,Qt,{provide:Ks,useValue:s},{provide:ke,useValue:e},{provide:Se,useFactory:fa,deps:[ke,ct]},{provide:br,useFactory:pa,deps:[Or,Ks,ke,ct],multi:!0}])}var ya="@ngrx/router-store/request",_n=oe(ya,ye()),zs="@ngrx/router-store/navigation",Nn=oe(zs,ye()),Hs="@ngrx/router-store/cancel",wn=oe(Hs,ye()),Gs="@ngrx/router-store/error",Un=oe(Gs,ye()),ma="@ngrx/router-store/navigated",$n=oe(ma,ye());function Ws(s,e){let r=e;switch(r.type){case zs:case Gs:case Hs:return{state:r.payload.routerState,navigationId:r.payload.event.id};default:return s}}var Ln=new b("@ngrx/router-store Internal Configuration"),Fn=new b("@ngrx/router-store Configuration");var Zs={[pt.STATE_NAME]:pt.Reducer,[gt.STATE_NAME]:gt.Reducer,[yt.STATE_NAME]:yt.Reducer,[ft.STATE_NAME]:ft.Reducer,[mt.STATE_NAME]:mt.Reducer,[Et.STATE_NAME]:Et.Reducer,[St.STATE_NAME]:St.Reducer,[vt.STATE_NAME]:vt.Reducer,[At.STATE_NAME]:At.Reducer,[Tt.STATE_NAME]:Tt.Reducer,[Ct.STATE_NAME]:Ct.Reducer,[Ot.STATE_NAME]:Ot.Reducer,[Rt.STATE_NAME]:Rt.Reducer,[kt.STATE_NAME]:kt.Reducer,router:Ws};var Js=(()=>{let e=class e{constructor(t,a,o,d){this.actions$=t,this.gs=a,this.itemService=o,this.router=d,this.authParams=I(()=>this.actions$.pipe(x(h.AuthParams),B(i=>this.itemService.auth(i.params,i.params2).pipe(S(c=>{let n=i.params2?.key??"";switch(n){case g.Auth.login:return z("cart"),z("selectedIndex"),c.token&&this.gs.alert(Q.AUTH_LOGIN_SUCCESS,"success"),setTimeout(()=>{if(c.token)return ee&&(G("token",JSON.stringify(c.token)),G("user",JSON.stringify(c.data)),c.data.role,Oe.Role.ROLE_USER,window.location.href=i.url),h.LoginSuccess({user:c.data});{let l=c.data?.base32;return this.router.navigate(["/login-otp"],{queryParams:{access_code:l}}),h.Failure({error:n})}},400),h.LoginSuccess({user:c.data});break;case g.Auth.register:return this.gs.alert(Q.AUTH_REGISTER),z("cart"),z("selectedIndex"),this.gs.trrigerAction("CloseAuthDialog"),c?.data?.role===Oe.Role.ROLE_USER?this.router.navigate([i.url]):this.router.navigate([i.url]),h.Failure({error:n});break;case g.Auth.resendVerification:return this.gs.alert(Q.AUTH_RESEND_VERIFICATION,"success"),this.gs.trrigerAction("CloseAuthDialog"),h.Failure({error:n});break;case g.Auth.emailVerification:return this.gs.alert(Q.AUTH_EMAIL_VERIFICATION,"success"),this.gs.trrigerAction("CloseAuthDialog"),this.router.navigate([i.url]),h.Failure({error:c.data});break;case g.Auth.otpVerification:case g.Auth.verify2factor:return console.log("response",c),c.token?(this.gs.alert(Q.AUTH_LOGIN_SUCCESS,"success"),G("token",JSON.stringify(c.token)),G("user",JSON.stringify(c.data)),this.gs.trrigerAction("CloseAuthDialog"),ee&&(c.data.role,Oe.Role.ROLE_USER,window.location.href="/"),h.LoginSuccess({user:c.data})):(this.gs.alert("User data not found","danger"),h.Failure({error:n}));case g.Auth.resetPassword:return this.gs.alert(Q.AUTH_RESET_PASSWORD,"success"),this.gs.trrigerAction("CloseAuthDialog"),this.gs.router("/login"),h.Failure({error:n});break;case g.Auth.forgotPassword:return this.gs.alert(Q.AUTH_FORGOT_PASSWORD,"success"),this.gs.trrigerAction("CloseAuthDialog"),this.gs.router("/"),h.Failure({error:n});break;case g.Auth.isEmailExists:return this.gs.alert(Q.AUTH_IS_EMAIL_EXISTS,"success"),this.gs.trrigerAction("CloseAuthDialog"),h.Failure({error:n});break;case g.Auth.reactivation:return this.gs.alert(Q.AUTH_REACTIVATION,"success"),z("cart"),z("selectedIndex"),setTimeout(()=>{if(c.token)return G("token",JSON.stringify(c.token)),G("user",JSON.stringify(c.data)),ee&&(c.data.role,Oe.Role.ROLE_USER,window.location.href="/"),h.LoginSuccess({user:c.data});{let l=c.data?.access_code;return this.router.navigate(["/login-otp"],{queryParams:{access_code:l}}),h.Failure({error:n})}},400),h.LoginSuccess({user:c.data});break;default:return h.Failure({error:"Key not define"})}}),k(c=>{let n=c,l=this.gs.apiResponce(n.error);if(l.status===422&&l.data?.user_id){let u=l.data?.user_id,f={key:g.Auth.resendVerification,user_id:u};this.itemService.auth(null,f).subscribe(E=>{})}return this.gs.trrigerAction(`Error-${i.params2?.key}`),O(h.Failure({error:c}))}))))),this.oAuthParams=I(()=>this.actions$.pipe(x(h.OauthParams),B(i=>this.itemService.oauth(i.params,i.params2).pipe(S(c=>(G("token",JSON.stringify(c.token)),G("user",JSON.stringify(c.data)),this.gs.alert(Q.AUTH_LOGIN_SUCCESS,"success"),ee&&(window.location.href="/"),h.LoginSuccess({user:c.data}))),k(c=>(this.gs.trrigerAction(`Error-${i.params2?.key}`),O(h.Failure({error:c})))))))),this.localStorage$=I(()=>this.actions$.pipe(x(h.LoginSuccess),Ue(i=>{let c=i.user;G("user",JSON.stringify(c))})),{dispatch:!1}),this.itemDefault$=I(()=>this.actions$.pipe(x(h.ItemParams),N(i=>this.itemService.item(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Item,u=n.substring(n.indexOf("-")+1);switch(n){case l[n]:return h.ItemList({data:c.data,key:n});case`delete-${u}`:return this.gs.alert(`You have successfully delete ${n.toLowerCase()}`,"danger"),i.url&&this.router.navigate([i.url]),h.ItemDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${n.toLowerCase()}`),i.url&&this.router.navigate([i.url]),h.ItemUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${n.toLowerCase()}`),i.url&&this.router.navigate([i.url]),h.ItemAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>O(h.Failure({error:c}))))))),this.defaultDefault$=I(()=>this.actions$.pipe(x(h.DefaultParams),N(i=>this.itemService.default(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Default,u=n.substring(n.indexOf("-")+1),f=u,E=i.msg??null;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.DefaultList({data:c.data??{items:[],pagination:null},key:n});break;case`delete-${u}`:return this.gs.alert(E||`You have successfully deleted the ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.DefaultDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(E||`You have successfully updated the ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.DefaultUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(E||`You have successfully added the ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.DefaultAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key}`),O(h.Failure({error:c})))))))),this.defaultLoadMOre$=I(()=>this.actions$.pipe(x(h.DefaultMoreParams),B(i=>this.itemService.default(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key;return h.DefaultMore({item:c.data,key:n})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.uploads$=I(()=>this.actions$.pipe(x(h.UploadParams),B(i=>this.itemService.basicUpload(i.params).pipe(S(c=>{if(c.data.files){let n=i.upload,l=c.data.files,u=l&&{image:l.filter(E=>E.mimetype==="image"),video:l.filter(E=>E.mimetype==="video"),docs:l.filter(E=>E.mimetype!=="video"&&E.mimetype!=="image")},f={image:n&&n?.image?u?.image.concat(n.image):u?.image,video:n&&n?.video?u?.video.concat(n.video):u?.video,docs:n&&n?.docs?u?.docs.concat(n.docs):u?.docs};return this.gs.alert("File successfully uploaded.","success"),h.UploadRespond({files:f})}else return this.gs.alert("Action not perform","danger"),h.Failure({error:"Upload in progress"})}),k(c=>O(h.Failure({error:c})))))))}};e.\u0275fac=function(a){return new(a||e)(m(Ee),m(ue),m(me),m(Ke))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();var Xs=(()=>{let e=class e{constructor(t,a,o,d){this.actions$=t,this.gs=a,this.itemService=o,this.router=d,this.ProfileParams$=I(()=>this.actions$.pipe(x(h.ProfileParams),N(i=>(i.key,g.User.logout,this.itemService.profile(i.method,i.params,i.params2).pipe(S(c=>{let n=h.LoginSuccess({user:c.data});switch(i.key){case"profile":this.gs.alert("You have successfully updated your profile");let l=i.url;return l&&this.router.navigate([l]),n;break;case"verification":return this.gs.alert("You have successfuly submit to profile verification"),n;break;case"avatar":return this.gs.alert("You have successfully updated your profile picture."),n;break;case"removeAvatar":return this.gs.alert("You have successfully remove your profile picture."),n;break;case"banner":return this.gs.alert("You have uploaded your banner photo."),n;break;case g.Trriger.ProfileSpecialitiesDialog:return this.gs.alert("You have successfully updated the specialities"),i.key&&this.gs.trrigerAction(i.key),i.url&&this.router.navigate([i.url]),n;break;case g.User.changePassword:return this.gs.alert("You have successfully changed your password"),i.key&&this.gs.trrigerAction(i.key),i.url&&this.router.navigate([i.url]),h.Failure({error:"Change password Success"});break;case g.User.deactivate:return this.gs.alert("You have successfuly deactivate your account."),this.gs.logout(),h.Failure({error:"Deactivate your account Success"});break;case g.User.logout:return this.gs.alert("You have successfully logged out."),z("token"),z("user"),z("ref_by"),ee&&(window.location.href="/"),h.Failure({error:"Logout Success"});break;case g.Trriger.ProfileLocationDialog:return this.gs.alert("You have successfully updated language and location"),i.key&&this.gs.trrigerAction(i.key),i.url&&this.router.navigate([i.url]),n;break;case g.Trriger.ProfileNameDialog:case g.Trriger.ProfileScreenNameDialog:case g.Trriger.ProfileAvatarDialog:case g.Trriger.ProfileReviewsDialog:case g.Trriger.ProfileEmailDialog:case g.Trriger.ProfileMobileNumberDialog:case g.Trriger.ProfilePasswordDialog:case g.Trriger.Profile2StepVerificationDialog:case g.Trriger.ProfileDeactivateDialog:case g.Trriger.ProfilePrivacyDialog:case g.Trriger.ProfileSpecialitiesDialog:case g.Trriger.ProfileAboutDialog:let u="";switch(i.key){case g.Trriger.ProfileNameDialog:u="your name.";break;case g.Trriger.ProfileScreenNameDialog:u="your screen name.";break;case g.Trriger.ProfileAvatarDialog:u="your profile picture.";break;case g.Trriger.ProfileReviewsDialog:u="your reviews.";break;case g.Trriger.ProfileEmailDialog:u="your email.";break;case g.Trriger.ProfileMobileNumberDialog:u="your mobile number.";break;case g.Trriger.ProfilePasswordDialog:u="your password.";break;case g.Trriger.Profile2StepVerificationDialog:u="your 2-Step verification.";break;case g.Trriger.ProfileDeactivateDialog:u="your deactivate my account.";break;case g.Trriger.ProfilePrivacyDialog:u="your privacy & cookies.";break;case g.Trriger.ProfileAboutDialog:u="your about.";break;default:u="message";break}return this.gs.alert(`You have successfully updated ${u}`),i.key&&this.gs.trrigerAction(i.key),i.url&&this.router.navigate([i.url]),n;break;case"load_profile":return n;default:}return h.Failure({error:"Action not perform"})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c}))))))))),this.UserParams$=I(()=>this.actions$.pipe(x(h.UserParams),N(i=>this.itemService.profile(i.method,i.params,i.params2).pipe(S(c=>{let n=i.key??"",l=g.User,u=n.substring(n.indexOf("-")+1),f=i.sort??g.ArrayOrder.desc,E=i.msg??null;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.UserList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(E||`You have successfully deleted the ${u}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.UserDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(E||`You have successfully updated the ${u}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.UserUpdate({item:c.data,key:u});break;case`add-${u}`:switch(n){case`add-${g.User.coupon}`:this.gs.alert("You have successfully purchased the coupon.");break;default:this.gs.alert(E||`You have successfully added the ${u}`);break}return i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.UserAdd({item:c.data,key:u,sort:f});break;default:return h.UserList({data:c.data,key:n})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.userLoadMOre$=I(()=>this.actions$.pipe(x(h.UserMoreParams),B(i=>this.itemService.profile(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key;return h.UserMore({item:c.data,key:n})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.catalog$=I(()=>this.actions$.pipe(x(h.CatalogParams),N(i=>this.itemService.catalog(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Catalog,u=n.substring(n.indexOf("-")+1),f=u===g.Catalog.wishlist?"favorite":u,E=i.msg??null;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.CatalogList({data:c.data??{items:[],pagination:null},key:n});break;case`delete-${u}`:return this.gs.alert(E||`You have successfully deleted the ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CatalogDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(E||`You have successfully updated the ${f===g.Catalog.view?"availability":f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CatalogUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(E||`You have successfully added the ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CatalogAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.catalogLoadMOre$=I(()=>this.actions$.pipe(x(h.CatalogMoreParams),B(i=>this.itemService.catalog(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key;return h.CatalogMore({item:c.data,key:n})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.tagTypes$=I(()=>this.actions$.pipe(x(h.TagTypesParams),N(i=>this.itemService.tagTypes(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Catalog,u=n.substring(n.indexOf("-")+1);switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.CatalogList({data:c.data??{items:[],pagination:null},key:n});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.categories$=I(()=>this.actions$.pipe(x(h.CategoriesParams),N(i=>this.itemService.categories(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Catalog,u=n.substring(n.indexOf("-")+1);switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.CatalogList({data:c.data??{items:[],pagination:null},key:n});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.orderParams$=I(()=>this.actions$.pipe(x(h.OrderParams),N(i=>this.itemService.orders(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Order,u=n.substring(n.indexOf("-")+1),f=u===g.Order.meeting?"meeting":u;switch(n===`send-${g.Order.reviews}`&&(this.gs.alert("You have successfully submit reviews"),i.url&&this.router.navigate([i.url])),n){case l[n]:return i.url&&this.router.navigate([i.url]),h.OrderList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.OrderDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.OrderUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.OrderAdd({item:c.data,key:u});break;case`${g.Order.reviews}-added`:return this.gs.alert("You have successfully added review"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(`${g.Order.reviews}-added`),h.OrderAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.orderParamsMore$=I(()=>this.actions$.pipe(x(h.OrderMoreParams),B(i=>this.itemService.orders("GET",i.params,i.params2).pipe(S(c=>{let n=i?.key;return h.OrderMore({item:c.data,key:n})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.courseParams$=I(()=>this.actions$.pipe(x(h.CourseParams),N(i=>this.itemService.video(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Course,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.CourseList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CourseDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CourseUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.CourseAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.courseParamsMore$=I(()=>this.actions$.pipe(x(h.OrderMoreParams),B(i=>this.itemService.orders("GET",i.params,i.params2).pipe(S(c=>{let n=i?.key;return h.OrderMore({item:c.data,key:n})}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.searchParams$=I(()=>this.actions$.pipe(x(h.SearchParams),N(i=>this.itemService.search(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Search,u=n?.substring(n.indexOf("-")+1),f=u,E=i.sort??g.ArrayOrder.desc,v=i.msg??null;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.SearchList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(v||`You have successfully deleted ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.SearchDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(v||`You have successfully updated ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.SearchUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(v||`You have successfully added ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.SearchAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.contactParams$=I(()=>this.actions$.pipe(x(h.ContactParams),N(i=>this.itemService.contact(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Contact,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.ContactList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ContactDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ContactUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ContactAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.referenceParams$=I(()=>this.actions$.pipe(x(h.ReferenceParams),N(i=>this.itemService.reference(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Reference,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.ReferenceList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ReferenceDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ReferenceUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.ReferenceAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.requestParams$=I(()=>this.actions$.pipe(x(h.RequestParams),N(i=>this.itemService.request(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Request,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.RequestList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.RequestDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.RequestUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.RequestAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.adsParams$=I(()=>this.actions$.pipe(x(h.AdsParams),N(i=>this.itemService.ads(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Ads,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.AdsList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.AdsDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.AdsUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.AdsAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c})))))))),this.staffParams$=I(()=>this.actions$.pipe(x(h.StaffParams),N(i=>this.itemService.staff(i.method,i.params,i.params2).pipe(S(c=>{let n=i?.key,l=g.Staff,u=n.substring(n.indexOf("-")+1),f=u;switch(n){case l[n]:return i.url&&this.router.navigate([i.url]),h.StaffList({data:c.data,key:n});break;case`delete-${u}`:return this.gs.alert(`You have successfully delete ${f}`,"danger"),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.StaffDelete({item:{id:i.params2.item_id},key:u});break;case`update-${u}`:return this.gs.alert(`You have successfully update ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.StaffUpdate({item:c.data,key:u});break;case`add-${u}`:return this.gs.alert(`You have successfully add ${f}`),i.url&&this.router.navigate([i.url]),this.gs.trrigerAction(n),h.StaffAdd({item:c.data,key:u});break;default:return h.Failure({error:c.message})}}),k(c=>(this.gs.trrigerAction(`Error-${i.key?.substring(i.key.indexOf("-")+1)}`),O(h.Failure({error:c}))))))))}};e.\u0275fac=function(a){return new(a||e)(m(Ee),m(ue),m(me),m(Ke))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();var Me="PERFORM_ACTION",Sa="REFRESH",oi="RESET",ci="ROLLBACK",ui="COMMIT",di="SWEEP",hi="TOGGLE_ACTION",li="SET_ACTIONS_ACTIVE",pi="JUMP_TO_STATE",fi="JUMP_TO_ACTION",nr="IMPORT_STATE",gi="LOCK_CHANGES",yi="PAUSE_RECORDING",ve=class{constructor(e,r){if(this.action=e,this.timestamp=r,this.type=Me,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Ht=class{constructor(){this.type=Sa}},Gt=class{constructor(e){this.timestamp=e,this.type=oi}},Wt=class{constructor(e){this.timestamp=e,this.type=ci}},Zt=class{constructor(e){this.timestamp=e,this.type=ui}},Jt=class{constructor(){this.type=di}},Xt=class{constructor(e){this.id=e,this.type=hi}},ei=class{constructor(e,r,t=!0){this.start=e,this.end=r,this.active=t,this.type=li}},er=class{constructor(e){this.index=e,this.type=pi}},tr=class{constructor(e){this.actionId=e,this.type=fi}},rr=class{constructor(e){this.nextLiftedState=e,this.type=nr}},sr=class{constructor(e){this.status=e,this.type=gi}},ir=class{constructor(e){this.status=e,this.type=yi}},ti=class{constructor(){this.maxAge=!1}},tt=new b("@ngrx/store-devtools Options"),ri=new b("@ngrx/store-devtools Initial Config");function mi(){return null}var va="NgRx Store DevTools";function Aa(s){let e={maxAge:!1,monitor:mi,actionSanitizer:void 0,stateSanitizer:void 0,name:va,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},r=typeof s=="function"?s():s,t=r.logOnly?{pause:!0,export:!0,test:!0}:!1,a=r.features||t||e.features;a.import===!0&&(a.import="custom");let o=Object.assign({},e,{features:a},r);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function si(s,e){return s.filter(r=>e.indexOf(r)<0)}function Ei(s){let{computedStates:e,currentStateIndex:r}=s;if(r>=e.length){let{state:a}=e[e.length-1];return a}let{state:t}=e[r];return t}function yo(s){return s.actionsById[s.nextActionId-1]}function be(s){return new ve(s,+Date.now())}function Ta(s,e){return Object.keys(e).reduce((r,t)=>{let a=Number(t);return r[a]=Si(s,e[a],a),r},{})}function Si(s,e,r){return A(y({},e),{action:s(e.action,r)})}function Ca(s,e){return e.map((r,t)=>({state:vi(s,r.state,t),error:r.error}))}function vi(s,e,r){return s(e,r)}function Ai(s){return s.predicate||s.actionsSafelist||s.actionsBlocklist}function Oa(s,e,r,t){let a=[],o={},d=[];return s.stagedActionIds.forEach((i,c)=>{let n=s.actionsById[i];n&&(c&&or(s.computedStates[c],n,e,r,t)||(o[i]=n,a.push(i),d.push(s.computedStates[c])))}),A(y({},s),{stagedActionIds:a,actionsById:o,computedStates:d})}function or(s,e,r,t,a){let o=r&&!r(s,e.action),d=t&&!e.action.type.match(t.map(c=>ii(c)).join("|")),i=a&&e.action.type.match(a.map(c=>ii(c)).join("|"));return o||d||i}function ii(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ti(s){return{ngZone:s?L(Fe):null,connectInZone:s}}var rt=(()=>{let e=class e extends Ve{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ar(e)))(o||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})(),Je={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},ar=new b("@ngrx/store-devtools Redux Devtools Extension"),Ci=(()=>{let _DevtoolsExtension=class _DevtoolsExtension{constructor(s,e,r){this.config=e,this.dispatcher=r,this.zoneConfig=Ti(this.config.connectInZone),this.devtoolsExtension=s,this.createActionStreams()}notify(s,e){if(this.devtoolsExtension)if(s.type===Me){if(e.isLocked||e.isPaused)return;let r=Ei(e);if(Ai(this.config)&&or(r,s,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let t=this.config.stateSanitizer?vi(this.config.stateSanitizer,r,e.currentStateIndex):r,a=this.config.actionSanitizer?Si(this.config.actionSanitizer,s,e.nextActionId):s;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,t))}else{let r=A(y({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?Ta(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?Ca(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Ae(s=>{let e=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=e,e.init(),e.subscribe(r=>s.next(r)),e.unsubscribe}):hr}createActionStreams(){let s=this.createChangesObservable().pipe(Sr()),e=s.pipe(_(i=>i.type===Je.START)),r=s.pipe(_(i=>i.type===Je.STOP)),t=s.pipe(_(i=>i.type===Je.DISPATCH),S(i=>this.unwrapAction(i.payload)),_e(i=>i.type===nr?this.dispatcher.pipe(_(c=>c.type===ht),it(1e3),Ne(1e3),S(()=>i),k(()=>O(i)),Y(1)):O(i))),o=s.pipe(_(i=>i.type===Je.ACTION),S(i=>this.unwrapAction(i.payload))).pipe(we(r)),d=t.pipe(we(r));this.start$=e.pipe(we(r)),this.actions$=this.start$.pipe(se(()=>o)),this.liftedActions$=this.start$.pipe(se(()=>d))}unwrapAction(action){return typeof action=="string"?eval(`(${action})`):action}getExtensionConfig(s){let e={name:s.name,features:s.features,serialize:s.serialize,autoPause:s.autoPause??!1,trace:s.trace??!1,traceLimit:s.traceLimit??75};return s.maxAge!==!1&&(e.maxAge=s.maxAge),e}sendToReduxDevtools(s){try{s()}catch(e){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",e)}}};_DevtoolsExtension.\u0275fac=function(e){return new(e||_DevtoolsExtension)(m(ar),m(tt),m(rt))},_DevtoolsExtension.\u0275prov=R({token:_DevtoolsExtension,factory:_DevtoolsExtension.\u0275fac});let DevtoolsExtension=_DevtoolsExtension;return DevtoolsExtension})(),et={type:dt},Ra="@ngrx/store-devtools/recompute",ka={type:Ra};function Oi(s,e,r,t,a){if(t)return{state:r,error:"Interrupted by an error up the chain"};let o=r,d;try{o=s(r,e)}catch(i){d=i.toString(),a.handleError(i)}return{state:o,error:d}}function Xe(s,e,r,t,a,o,d,i,c){if(e>=s.length&&s.length===o.length)return s;let n=s.slice(0,e),l=o.length-(c?1:0);for(let u=e;u<l;u++){let f=o[u],E=a[f].action,v=n[u-1],T=v?v.state:t,j=v?v.error:void 0,P=d.indexOf(f)>-1?v:Oi(r,E,T,j,i);n.push(P)}return c&&n.push(s[s.length-1]),n}function Da(s,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:be(et)},stagedActionIds:[0],skippedActionIds:[],committedState:s,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function ba(s,e,r,t,a={}){return o=>(d,i)=>{let{monitorState:c,actionsById:n,nextActionId:l,stagedActionIds:u,skippedActionIds:f,committedState:E,currentStateIndex:v,computedStates:T,isLocked:j,isPaused:C}=d||e;d||(n=Object.create(n));function P(w){let M=w,re=u.slice(1,M+1);for(let q=0;q<re.length;q++)if(T[q+1].error){M=q,re=u.slice(1,M+1);break}else delete n[re[q]];f=f.filter(q=>re.indexOf(q)===-1),u=[0,...u.slice(M+1)],E=T[M].state,T=T.slice(M),v=v>M?v-M:0}function te(){n={0:be(et)},l=1,u=[0],f=[],E=T[v].state,v=0,T=[]}let D=0;switch(i.type){case gi:{j=i.status,D=1/0;break}case yi:{C=i.status,C?(u=[...u,l],n[l]=new ve({type:"@ngrx/devtools/pause"},+Date.now()),l++,D=u.length-1,T=T.concat(T[T.length-1]),v===u.length-2&&v++,D=1/0):te();break}case oi:{n={0:be(et)},l=1,u=[0],f=[],E=s,v=0,T=[];break}case ui:{te();break}case ci:{n={0:be(et)},l=1,u=[0],f=[],v=0,T=[];break}case hi:{let{id:w}=i;f.indexOf(w)===-1?f=[w,...f]:f=f.filter(re=>re!==w),D=u.indexOf(w);break}case li:{let{start:w,end:M,active:re}=i,q=[];for(let st=w;st<M;st++)q.push(st);re?f=si(f,q):f=[...f,...q],D=u.indexOf(w);break}case pi:{v=i.index,D=1/0;break}case fi:{let w=u.indexOf(i.actionId);w!==-1&&(v=w),D=1/0;break}case di:{u=si(u,f),f=[],v=Math.min(v,u.length-1);break}case Me:{if(j)return d||e;if(C||d&&or(d.computedStates[v],i,a.predicate,a.actionsSafelist,a.actionsBlocklist)){let M=T[T.length-1];T=[...T.slice(0,-1),Oi(o,i.action,M.state,M.error,r)],D=1/0;break}a.maxAge&&u.length===a.maxAge&&P(1),v===u.length-1&&v++;let w=l++;n[w]=i,u=[...u,w],D=u.length-1;break}case nr:{({monitorState:c,actionsById:n,nextActionId:l,stagedActionIds:u,skippedActionIds:f,committedState:E,currentStateIndex:v,computedStates:T,isLocked:j,isPaused:C}=i.nextLiftedState);break}case dt:{D=0,a.maxAge&&u.length>a.maxAge&&(T=Xe(T,D,o,E,n,u,f,r,C),P(u.length-a.maxAge),D=1/0);break}case ht:{if(T.filter(M=>M.error).length>0)D=0,a.maxAge&&u.length>a.maxAge&&(T=Xe(T,D,o,E,n,u,f,r,C),P(u.length-a.maxAge),D=1/0);else{if(!C&&!j){v===u.length-1&&v++;let M=l++;n[M]=new ve(i,+Date.now()),u=[...u,M],D=u.length-1,T=Xe(T,D,o,E,n,u,f,r,C)}T=T.map(M=>A(y({},M),{state:o(M.state,ka)})),v=u.length-1,a.maxAge&&u.length>a.maxAge&&P(u.length-a.maxAge),D=1/0}break}default:{D=1/0;break}}return T=Xe(T,D,o,E,n,u,f,r,C),c=t(c,i),{monitorState:c,actionsById:n,nextActionId:l,stagedActionIds:u,skippedActionIds:f,committedState:E,currentStateIndex:v,computedStates:T,isLocked:j,isPaused:C}}}var ai=(()=>{let e=class e{constructor(t,a,o,d,i,c,n,l){let u=Da(n,l.monitor),f=ba(n,u,c,l.monitor,l),E=H(H(a.asObservable().pipe(vr(1)),d.actions$).pipe(S(be)),t,d.liftedActions$).pipe(lr(dr)),v=o.pipe(S(f)),T=Ti(l.connectInZone),j=new ur(1);this.liftedStateSubscription=E.pipe(W(v),ni(T),Er(({state:te},[D,w])=>{let M=w(te,D);return D.type!==Me&&Ai(l)&&(M=Oa(M,l.predicate,l.actionsSafelist,l.actionsBlocklist)),d.notify(D,M),{state:M,action:D}},{state:u,action:null})).subscribe(({state:te,action:D})=>{if(j.next(te),D.type===Me){let w=D.action;i.next(w)}}),this.extensionStartSubscription=d.start$.pipe(ni(T)).subscribe(()=>{this.refresh()});let C=j.asObservable(),P=C.pipe(S(Ei));Object.defineProperty(P,"state",{value:Yr(P,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=C,this.state=P}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new ve(t,+Date.now()))}refresh(){this.dispatch(new Ht)}reset(){this.dispatch(new Gt(+Date.now()))}rollback(){this.dispatch(new Wt(+Date.now()))}commit(){this.dispatch(new Zt(+Date.now()))}sweep(){this.dispatch(new Jt)}toggleAction(t){this.dispatch(new Xt(t))}jumpToAction(t){this.dispatch(new tr(t))}jumpToState(t){this.dispatch(new er(t))}importState(t){this.dispatch(new rr(t))}lockChanges(t){this.dispatch(new sr(t))}pauseRecording(t){this.dispatch(new ir(t))}};e.\u0275fac=function(a){return new(a||e)(m(rt),m(Ve),m(zr),m(Ci),m(le),m(Le),m(Vr),m(tt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let s=e;return s})();function ni({ngZone:s,connectInZone:e}){return r=>e?new Ae(t=>r.subscribe({next:a=>s.run(()=>t.next(a)),error:a=>s.run(()=>t.error(a)),complete:()=>s.run(()=>t.complete())})):r}var Ma=new b("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Ia(s,e){return!!s||e.monitor!==mi}function xa(){let s="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[s]<"u"?window[s]:null}function cr(s={}){return Z([Ci,rt,ai,{provide:ri,useValue:s},{provide:Ma,deps:[ar,tt],useFactory:Ia},{provide:ar,useFactory:xa},{provide:tt,deps:[ri],useFactory:Aa},{provide:Wr,deps:[ai],useFactory:_a},{provide:Hr,useExisting:rt}])}function _a(s){return s.state}var mo=(()=>{let e=class e{static instrument(t={}){return{ngModule:e,providers:[cr(t)]}}};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=Te({});let s=e;return s})();var Ri=(()=>{let e=class e{constructor(t){this.gs=t}ngOnInit(){}};e.\u0275fac=function(a){return new(a||e)(J(ue))},e.\u0275cmp=$e({type:e,selectors:[["app-not-found"]],standalone:!0,features:[Pe],decls:27,vars:0,consts:[[1,"all-content"],[1,"not-found","my-4"],[1,"container"],[1,"row"],[1,"col-12"],[1,"404-page","text-center"],[1,"error-container"],[1,"four"],[1,"screen-reader-text"],[1,"zero"],[1,"link-container"],["routerLink","/",1,"btn","btn-primary"]],template:function(a,o){a&1&&(ge(0,"app-header"),ie(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h1"),ne(8,"Page Not Found"),ae(),ie(9,"section",6)(10,"span",7)(11,"span",8),ne(12,"4"),ae()(),ie(13,"span",9)(14,"span",8),ne(15,"0"),ae()(),ie(16,"span",7)(17,"span",8),ne(18,"4"),ae()()(),ie(19,"p"),ne(20," The above error occurred while the Web server was processing your request. "),ae(),ie(21,"p"),ne(22," Please contact us if you think this is a server error. Thank you. "),ae(),ie(23,"div",10)(24,"a",11),ne(25,"Visit the original site"),ae()()()()()()()(),ge(26,"app-footer"))},dependencies:[ms,es,ys],styles:[".btn-primary[_ngcontent-%COMP%]{background-color:#faae1c}"]});let s=e;return s})();var ki=[{path:"",loadChildren:()=>import("./chunk-NDUP7HWO.js")},{path:"",loadChildren:()=>import("./chunk-PIBH2VQM.js")},{path:"",loadChildren:()=>import("./chunk-INGHXWA4.js")},{path:"",loadChildren:()=>import("./chunk-BKHRBW6T.js")},{path:"",loadChildren:()=>import("./chunk-ZFWOIKKC.js")},{path:"",loadChildren:()=>import("./chunk-TLLTZQUR.js")},{path:"",loadChildren:()=>import("./chunk-M7ZGZKYF.js")},{path:"",loadChildren:()=>import("./chunk-BO3GIQVS.js")},{path:"",loadChildren:()=>import("./chunk-VYWHCN7Z.js")},{path:"",loadChildren:()=>import("./chunk-VQNSYCTI.js")},{path:"",loadChildren:()=>import("./chunk-3DUATCM4.js")},{path:"",loadChildren:()=>import("./chunk-YYIVWYI7.js")},{path:"**",component:Ri,title:"Page not found"}];var Di={providers:[Pr(),rs(ki,ns(),as(),ss({anchorScrolling:"enabled",scrollPositionRestoration:"top"}),is(ts)),Nr(Ur(),wr()),Cr(Lr,jr,Fr,hs),Qs("ngsw-worker.js",{enabled:Ye.production,registrationStrategy:"registerWhenStable:30000"}),Zr(Zs),Cs([Js,Xs]),cr({maxAge:25,logOnly:!je(),autoPause:!0,trace:!1,traceLimit:75}),Ys(Vs),fs,{provide:Ir,useValue:"USD "},{provide:he,useValue:()=>L(ls),multi:!0},{provide:Xr,useClass:ds},{provide:_r,useValue:s=>`${s.src}`}]};var Na=()=>[import("./chunk-AQMFMK7P.js").then(s=>s.RouterOutlet)];function wa(s,e){s&1&&ge(0,"router-outlet")}var bi=(()=>{let e=class e{constructor(t,a,o,d,i,c){this.gs=t,this.swUpdate=a,this.confirmDialog=o,this.itemService=d,this._document=i,this.webSocketService=c,this.show=!1,this.meesage=null,this.rootUrl=Ye,this.gs.store.dispatch(h.DefaultParams({method:"GET",params:null,params2:{key:g.Default.config,size:100},key:g.Default.config}))}ngOnInit(){this.isLoggedIn$=this.itemService.authenticationState;try{let t=gs("user"),a=t!==null?JSON.parse(t):null;a&&this.gs.store.dispatch(h.LoginSuccess({user:a})),this.gs.store.dispatch(h.CatalogParams({method:"GET",params:null,params2:{key:g.Catalog["tag-types"],size:500},key:g.Catalog["tag-types"]})),this.gs.store.dispatch(h.CatalogParams({method:"GET",params:null,params2:{key:g.Catalog.categories,size:300},key:g.Catalog.categories}))}catch(t){console.error(t)}this.isLoggedIn$.pipe(Ne(500)).subscribe(t=>{t&&this.gs.store.dispatch(h.ProfileParams({method:"GET",params:null,params2:{primary_id:this.gs.identity?.id},key:"load_profile"}))}),this.webSocketService.connect(),this.webSocketService.socketClose.subscribe(t=>{this.webSocketService.connect()}),this.webSocketService.onMessage.subscribe(t=>{console.log("Socket123",t);let a=t}),this.swUpdate.isEnabled&&this.swUpdate.versionUpdates.subscribe(()=>{ee&&window.location.reload()}),this._document.body.classList.add(this.gs.identity?this.gs.identity.role:"general")}send(){}ngOnDestroy(){}};e.\u0275fac=function(a){return new(a||e)(J(ue),J(Qt),J(os),J(me),J(xr),J(ps))},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],standalone:!0,features:[Pe],decls:5,vars:0,template:function(a,o){a&1&&(ge(0,"app-toasts")(1,"app-confirm-dialog"),Rr(2,wa,1,0),kr(3,2,Na),Dr())},dependencies:[cs,us],encapsulation:2});let s=e;return s})();$r(bi,Di).catch(s=>console.error(s));

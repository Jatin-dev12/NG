import{Nb as x,P,Q as _,Sc as z,Tc as $,Ub as q,na as L}from"./chunk-CKIWQN5W.js";import{ba as j}from"./chunk-MAJ4KHTQ.js";import"./chunk-62YZNTYL.js";import{$b as k,Ac as R,Cc as o,Db as l,Dc as f,Eb as h,Ec as F,Ga as E,Hc as M,Id as N,Kc as w,Mc as D,Pb as I,Xb as g,Yb as v,Zb as T,_b as b,a as C,ee as O,gc as n,hc as a,ic as S,tc as U,ub as y,vc as p,yc as A,zc as u}from"./chunk-UT4UL2LR.js";var B=["app-search-managers-listing-item",""];function G(t,r){if(t&1&&(n(0,"div",18),S(1,"img",9),a()),t&2){let i=p();l(1),u("src","",i.gs.imgUrl,"/rat-badge.svg",y)}}function Y(t,r){if(t&1&&(n(0,"div",20),o(1),a()),t&2){let i=p().$implicit;l(1),f(i)}}function K(t,r){if(t&1&&g(0,Y,2,1,"div",19),t&2){let i=r.$implicit;v(0,i?0:-1)}}function H(t,r){t&1&&(n(0,"div",21),o(1,"Specialities not found"),a())}function J(t,r){if(t&1&&(n(0,"a",22),o(1,"Pending"),a()),t&2){let i=p();u("routerLink","/requests/contact/view/",i.item==null?null:i.item.contact_id,"")}}function Q(t,r){if(t&1&&(n(0,"a",23),o(1,"Rejected"),a()),t&2){let i=p();u("routerLink","/requests/contact/view/",i.item==null?null:i.item.contact_id,"")}}function V(t,r){if(t&1&&(n(0,"a",24),o(1,"Accepted"),a()),t&2){let i=p();u("routerLink","/requests/contact/view/",i.item==null?null:i.item.contact_id,"")}}function W(t,r){t&1&&(n(0,"a",25),o(1,"Resubmitted"),a())}function X(t,r){if(t&1&&(n(0,"a",24),o(1,"Contact"),a()),t&2){let i=p();u("routerLink","/property-managers/view/",i.item==null?null:i.item.username,"")}}var Z=t=>({text:t}),de=(()=>{let r=class r{constructor(d,s,e){this.gs=d,this.confirmDialog=s,this.itemService=e,this.item=null,this.key="search",this.favourileLoading=!1,this.Enums=P}ngOnInit(){}get tagsArray(){return this.item?.tags?this.item?.tags?.split(", "):[]}handleFavourite(d){if(this.gs.identity===null){this.confirmDialog.confirmThis("Login Required",()=>{this.gs.router("/login")},()=>{console.log("No clicked")});return}if(d.is_favorite)this.confirmDialog.confirm({header:this.gs.translate("Remove Favorite?"),icon:`<img src="${this.gs.imgUrl}/reject.svg" alt="" />`,message:this.gs.translate("Are you sure you want to remove favorite list?")},()=>{this.favourileLoading=!0;let s={favorite_id:d.id,key:_.User.favorite};this.itemService.profile("DELETE",null,s).subscribe(e=>{this.favourileLoading=!1;let m=C({},this.item);m.is_favorite=!1,this.gs.store.dispatch(L.UserUpdate({item:m,key:_.User.search})),this.gs.alert("You have successfully removed this manager from your favorites list.","danger")},e=>{this.favourileLoading=!1})},()=>console.log("No clicked"));else{this.favourileLoading=!0;let s={user_id:this.gs.identity.id,favorite_id:d.id,moduleId:"UserProfile"},e={key:_.User.favorite};this.itemService.profile("POST",{form:s},e).subscribe(m=>{this.favourileLoading=!1;let c=C({},this.item);c.is_favorite=!0,this.gs.store.dispatch(L.UserUpdate({item:c,key:_.User.search})),this.gs.alert("You have successfully added this manager to your favorites list.")},m=>{this.favourileLoading=!1})}}};r.\u0275fac=function(s){return new(s||r)(h(z),h(q),h($))},r.\u0275cmp=E({type:r,selectors:[["","app-search-managers-listing-item",""],["app-search-managers-listing-item"]],inputs:{item:"item",favorite:"favorite",key:"key"},standalone:!0,features:[M([]),w],attrs:B,decls:33,vars:17,consts:[[1,"row"],[1,"col-sm-3"],[1,"image"],[3,"routerLink"],["width","400","height","200",3,"ngSrc","alt"],[1,"col-sm-9"],[1,"detail"],[1,"faveritesbtn"],["type","button",1,"faverites","text",3,"ngClass","appLadda","click"],["alt","",3,"src"],["class","ratebadge"],[1,"desina"],[1,"address"],[1,"col-sm-10"],["class","w-100"],[1,"col-sm-2"],[1,"btndiv"],[1,"content"],[1,"ratebadge"],["class","catname"],[1,"catname"],[1,"w-100"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-danger",3,"routerLink"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-primary",2,"pointer-events","none"]],template:function(s,e){if(s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),S(4,"img",4),a()()(),n(5,"div",5)(6,"div",6)(7,"h3")(8,"a",3),o(9),a()(),n(10,"div",7)(11,"button",8),U("click",function(){return e.handleFavourite(e.item)}),S(12,"img",9),o(13,"Favorite "),a()(),g(14,G,2,1,"div",10),n(15,"div",11),o(16),a(),n(17,"div",12),o(18),a(),n(19,"div",0)(20,"div",13),b(21,K,1,1,null,null,T),g(23,H,2,0,"div",14),a(),n(24,"div",15)(25,"div",16),g(26,J,2,1)(27,Q,2,1)(28,V,2,1)(29,W,2,0)(30,X,2,1),a()()(),n(31,"div",17),o(32),a()()()()),s&2){let m,c;l(3),u("routerLink","/profile/view/",e.item==null?null:e.item.username,""),l(1),A("ngSrc",e.item==null?null:e.item.avatar),I("alt",e.item==null?null:e.item.name),l(4),u("routerLink","/profile/view/",e.item==null?null:e.item.username,""),l(1),f(e.item==null?null:e.item.name),l(2),I("ngClass",D(15,Z,e.item==null?null:e.item.is_favorite))("appLadda",e.favourileLoading),l(1),R("src","",e.gs.imgUrl,"/",e.item!=null&&e.item.is_favorite?"heart-hor.svg":"heart-nor.svg","",y),l(2),v(14,e.item!=null&&e.item.badge?14:-1),l(2),f(e.item!=null&&e.item.title?e.item==null?null:e.item.title:e.gs.removeLastS(e.item==null?null:e.item.role)),l(2),f((m=e.item==null||e.item.location==null?null:e.item.location.location)!==null&&m!==void 0?m:"-"),l(3),k(e.tagsArray),l(2),v(23,e.item&&(e.tagsArray==null?null:e.tagsArray.length)===0?23:-1),l(3),v(26,(c=e.item==null?null:e.item.in_contact)===e.Enums.USER_PROFILE_CONTACT_STATUS_PENDING?26:c===e.Enums.USER_PROFILE_CONTACT_STATUS_DECLINED?27:c===e.Enums.USER_PROFILE_CONTACT_STATUS_ACCEPT?28:c===e.Enums.USER_PROFILE_CONTACT_STATUS_RESUBMITTED?29:30),l(6),F(" ",e.item==null?null:e.item.about," ")}},dependencies:[j,x,N,O]});let t=r;return t})();export{de as SearchManagersListingItemComponent};

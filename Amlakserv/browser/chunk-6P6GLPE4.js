import{a as D,b as N}from"./chunk-6YFXDBJR.js";import{P as m,R as _,Sa as y,Sc as M,Ub as O,ec as L}from"./chunk-CKIWQN5W.js";import{ba as I}from"./chunk-MAJ4KHTQ.js";import{Cc as s,Db as l,Dc as h,Eb as g,Ga as v,Kc as A,La as E,Ma as S,Pb as p,Xb as f,Yb as d,gc as o,hc as r,ic as C,mc as R,tb as w,tc as T,ub as x,vc as u,zc as b}from"./chunk-UT4UL2LR.js";function U(i,a){if(i&1){let e=R();o(0,"a",15),T("click",function(){E(e);let n=u(2);return S(n.contact())}),s(1,"Contact"),r()}}function k(i,a){if(i&1&&(o(0,"a",16),s(1,"View Management Agreement"),r()),i&2){let e=u(2);b("routerLink","/properties/manager-agreement/",e.item==null?null:e.item.id,"")}}function V(i,a){if(i&1&&(o(0,"div",1)(1,"div",2)(2,"h1"),s(3,"Property Manager"),r()(),o(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),C(8,"img",7),r()(),o(9,"div",8)(10,"div",9)(11,"h3"),s(12),r(),o(13,"h4"),s(14),r(),o(15,"div",10),C(16,"div",11),r(),o(17,"div",12),f(18,U,2,0,"a",13)(19,k,2,1,"a",14),r()()()()()()),i&2){let e=u();l(8),p("src",e.manager!=null&&e.manager.avatar?e.manager==null?null:e.manager.avatar:e.gs.imgUrl+"/manager-1.png",x)("alt",e.manager==null?null:e.manager.name),l(4),h(e.manager==null?null:e.manager.name),l(2),h(e.manager!=null&&e.manager.title?e.manager==null?null:e.manager.title:e.manager==null?null:e.manager.role),l(2),p("innerHTML",e.manager==null?null:e.manager.about,w),l(2),d(18,(e.ownerAgreement==null?null:e.ownerAgreement.status)===e.Enums.USER_CATALOG_ORDERS_REFERENCE_STATUS_CONFIRMED&&(e.manager==null?null:e.manager.id)!==(e.gs.identity==null?null:e.gs.identity.id)?18:-1),l(1),d(19,e.gs.is_owner||e.gs.is_manager?19:-1)}}var W=(()=>{let a=class a{constructor(t,n,c){this.gs=t,this.modalService=n,this.confirmDialog=c,this.show_action=!0,this.AdditionalEnums=_,this.Enums=m}get manager(){return this.item?.agreement?.manager}get ownerAgreement(){return this.item?.agreement?.userCatalogOrdersReferences?.find(t=>t.relation===_.USER_CATALOG_ROLE_OWNER)??null}get is_manage(){return this.item?.owner_id===this.item?.user_id}get owner(){return this.item?.owner}contact(){if(this.manager?.message_id===0){if(this.manager?.contact_id===m.USER_PROFILE_CONTACT_STATUS_NONE){this._sendContactRequest();return}if(this.manager?.contact_id===m.USER_PROFILE_CONTACT_STATUS_PENDING){this._confirm("You contact request is pending.");return}if(this.manager?.contact_id===m.USER_PROFILE_CONTACT_STATUS_DECLINED){this._confirm("You contact request is declined.");return}return}if(this.manager?.message_id){this._sendMessage();return}}_contactDialog(){let t=this.modalService.open(D,{windowClass:"center",keyboard:!1,animation:!0});t.componentInstance.item=this.item,t.componentInstance.relation=_.USER_CATALOG_ROLE_MANAGER,t.componentInstance.contactUser=this.manager,t.result.then(n=>{console.log("result",n)},n=>{console.log("reason",n)})}_sendMessage(){let t=this.modalService.open(L,{windowClass:"center",keyboard:!1,animation:!0});t.componentInstance.item=this.manager,t.result.then(n=>{console.log("result",n)},n=>{console.log("reason",n)})}_confirm(t){this.confirmDialog.confirm({message:this.gs.translate(t),rejectVisible:!1,acceptLabel:"Okay"},()=>{},()=>{console.log("No clicked")})}_sendContactRequest(){let t=this.modalService.open(N,{windowClass:"center",keyboard:!1,animation:!0});t.componentInstance.catalog=this.item,t.componentInstance.user=this.is_manage?this.manager:this.owner,t.result.then(n=>{console.log("result",n)},n=>{console.log("reason",n)})}};a.\u0275fac=function(n){return new(n||a)(g(M),g(y),g(O))},a.\u0275cmp=v({type:a,selectors:[["app-catalog-manager-box-view"]],inputs:{item:"item",show_action:"show_action"},standalone:!0,features:[A],decls:1,vars:1,consts:[["class","pv-box manager"],[1,"pv-box","manager"],[1,"pv-title"],[1,"pv-body"],[1,"row"],[1,"col-sm-3"],[1,"image"],[3,"src","alt"],[1,"col-sm-9"],[1,"lefttxt"],["infiniteScroll","",1,"left-scroll","css-scroll"],[1,"contenttwo",3,"innerHTML"],[1,"btndiv"],["class","btn btn-primary"],["class","btn btn-secondary",3,"routerLink"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(n,c){n&1&&f(0,V,20,7,"div",0),n&2&&d(0,c.manager!=null&&c.manager.id?0:-1)},dependencies:[I]});let i=a;return i})();export{W as a};
